import { defineComponent as St, ref as Re, onMounted as Ko, onUnmounted as Zo, computed as or, watch as ir, openBlock as Pt, createElementBlock as $t, createElementVNode as Ze, normalizeClass as Xo, withDirectives as ei, vShow as ti, renderSlot as lr, withModifiers as Xe } from "vue";
var dr = (n, a, o) => {
  if (!a.has(n))
    throw TypeError("Cannot " + o);
}, ri = (n, a, o) => (dr(n, a, "read from private field"), o ? o.call(n) : a.get(n)), ni = (n, a, o) => {
  if (a.has(n))
    throw TypeError("Cannot add the same private member more than once");
  a instanceof WeakSet ? a.add(n) : a.set(n, o);
}, oi = (n, a, o, c) => (dr(n, a, "write to private field"), c ? c.call(n, o) : a.set(n, o), o);
function ii(n) {
  if (ai(n))
    return {
      width: n.naturalWidth,
      height: n.naturalHeight
    };
  if (si(n))
    return {
      width: n.width.baseVal.value,
      height: n.height.baseVal.value
    };
  if (ui(n))
    return {
      width: n.videoWidth,
      height: n.videoHeight
    };
  if (pr(n))
    return {
      width: n.width,
      height: n.height
    };
  if (ci(n))
    return {
      width: n.width,
      height: n.height
    };
  if (fi(n))
    return {
      width: n.width,
      height: n.height
    };
  if (li(n))
    return {
      width: n.displayWidth,
      height: n.displayHeight
    };
  throw new Error("Unsupported image type");
}
function ai(n) {
  try {
    return n instanceof HTMLImageElement;
  } catch {
    return !1;
  }
}
function si(n) {
  try {
    return n instanceof SVGImageElement;
  } catch {
    return !1;
  }
}
function ui(n) {
  try {
    return n instanceof HTMLVideoElement;
  } catch {
    return !1;
  }
}
function pr(n) {
  try {
    return n instanceof HTMLCanvasElement;
  } catch {
    return !1;
  }
}
function ci(n) {
  try {
    return n instanceof ImageBitmap;
  } catch {
    return !1;
  }
}
function fi(n) {
  try {
    return n instanceof OffscreenCanvas;
  } catch {
    return !1;
  }
}
function li(n) {
  try {
    return n instanceof VideoFrame;
  } catch {
    return !1;
  }
}
function di(n) {
  try {
    return n instanceof Blob;
  } catch {
    return !1;
  }
}
function pi(n) {
  try {
    return n instanceof ImageData;
  } catch {
    return !1;
  }
}
function hi(n, a) {
  try {
    const o = new OffscreenCanvas(n, a);
    if (o.getContext("2d") instanceof OffscreenCanvasRenderingContext2D)
      return o;
    throw new Error("OffscreenCanvasRenderingContext2D is not supported");
  } catch {
    const o = document.createElement("canvas");
    return o.width = n, o.height = a, o;
  }
}
function hr(n) {
  const { width: a, height: o } = ii(n), c = hi(a, o), d = c.getContext("2d");
  d.drawImage(n, 0, 0);
  const p = d.getImageData(0, 0, a, o);
  return pr(c) && c.remove(), p;
}
async function mi(n) {
  const a = await createImageBitmap(n);
  return hr(a);
}
async function vi(n) {
  return di(n) ? await mi(n) : pi(n) ? n : hr(n);
}
const ar = (n) => {
  let a;
  const o = /* @__PURE__ */ new Set(), c = (m, w) => {
    const b = typeof m == "function" ? m(a) : m;
    if (!Object.is(b, a)) {
      const v = a;
      a = w ?? typeof b != "object" ? b : Object.assign({}, a, b), o.forEach((S) => S(a, v));
    }
  }, d = () => a, p = { setState: c, getState: d, subscribe: (m) => (o.add(m), () => o.delete(m)), destroy: () => {
    ({ BASE_URL: "/", MODE: "production", DEV: !1, PROD: !0, SSR: !1 } && "production") !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), o.clear();
  } };
  return a = n(c, d, p), p;
}, yi = (n) => n ? ar(n) : ar, gi = {
  locateFile: (n, a) => {
    var o;
    const c = (o = n.match(new RegExp("(?<=_).+?(?=\\.wasm$)"))) == null ? void 0 : o[0];
    return c ? `https://cdn.jsdelivr.net/npm/@sec-ant/zxing-wasm@1.2.4/dist/${c}/${n}` : a + n;
  }
}, xe = yi()(() => ({
  zxingModuleWeakMap: /* @__PURE__ */ new WeakMap(),
  zxingModuleOverrides: gi
}));
function mr(n, a = xe.getState().zxingModuleOverrides) {
  const { zxingModuleWeakMap: o } = xe.getState(), c = o.get(
    n
  );
  if (c && Object.is(a, xe.getState().zxingModuleOverrides))
    return c;
  {
    xe.setState({
      zxingModuleOverrides: a
    });
    const d = n(a);
    return o.set(n, d), d;
  }
}
const sr = [
  "Aztec",
  "Codabar",
  "Code128",
  "Code39",
  "Code93",
  "DataBar",
  "DataBarExpanded",
  "DataMatrix",
  "EAN-13",
  "EAN-8",
  "ITF",
  "Linear-Codes",
  "Matrix-Codes",
  "MaxiCode",
  "MicroQRCode",
  "None",
  "PDF417",
  "QRCode",
  "UPC-A",
  "UPC-E"
], ce = {
  tryHarder: !0,
  formats: [],
  maxNumberOfSymbols: 1 / 0
};
async function Ci(n, {
  tryHarder: a = ce.tryHarder,
  formats: o = ce.formats,
  maxNumberOfSymbols: c = ce.maxNumberOfSymbols
} = ce, d) {
  const p = await mr(
    d,
    xe.getState().zxingModuleOverrides
  ), {
    data: m,
    width: w,
    height: b,
    data: { byteLength: v }
  } = n, S = p._malloc(v);
  p.HEAP8.set(m, S);
  const P = p.readBarcodeFromPixmap(
    S,
    w,
    b,
    a,
    wi(o),
    c
  );
  p._free(S);
  const C = [];
  for (let E = 0; E < P.size(); ++E) {
    const A = P.get(E);
    C.push({
      ...A,
      format: _i(A.format)
    });
  }
  return C;
}
function wi(n) {
  return n.join("|");
}
function _i(n) {
  const a = ur(n);
  let o = 0, c = sr.length - 1;
  for (; o <= c; ) {
    const d = Math.floor((o + c) / 2), p = sr[d], m = ur(p);
    if (m === a)
      return p;
    m < a ? o = d + 1 : c = d - 1;
  }
  return "None";
}
function ur(n) {
  return n.toLowerCase().replace(/_-\[\]/g, "");
}
var vr = (() => {
  var n = import.meta.url;
  return function(a = {}) {
    var o = typeof a < "u" ? a : {}, c, d;
    o.ready = new Promise((e, t) => {
      c = e, d = t;
    });
    var p = Object.assign({}, o), m = "./this.program", w = typeof window == "object", b = typeof importScripts == "function";
    typeof process == "object" && typeof process.versions == "object" && process.versions.node;
    var v = "";
    function S(e) {
      return o.locateFile ? o.locateFile(e, v) : v + e;
    }
    var P;
    (w || b) && (b ? v = self.location.href : typeof document < "u" && document.currentScript && (v = document.currentScript.src), n && (v = n), v.indexOf("blob:") !== 0 ? v = v.substr(0, v.replace(/[?#].*/, "").lastIndexOf("/") + 1) : v = "", b && (P = (e) => {
      var t = new XMLHttpRequest();
      return t.open("GET", e, !1), t.responseType = "arraybuffer", t.send(null), new Uint8Array(t.response);
    })), o.print || console.log.bind(console);
    var C = o.printErr || console.error.bind(console);
    Object.assign(o, p), p = null, o.arguments && o.arguments, o.thisProgram && (m = o.thisProgram), o.quit && o.quit;
    var E;
    o.wasmBinary && (E = o.wasmBinary), o.noExitRuntime, typeof WebAssembly != "object" && we("no native wasm support detected");
    var A, F = !1;
    function B(e, t) {
      e || we(t);
    }
    var I, L, ee, de, H, V, ke, Ue;
    function Fe() {
      var e = A.buffer;
      o.HEAP8 = I = new Int8Array(e), o.HEAP16 = ee = new Int16Array(e), o.HEAP32 = H = new Int32Array(e), o.HEAPU8 = L = new Uint8Array(e), o.HEAPU16 = de = new Uint16Array(e), o.HEAPU32 = V = new Uint32Array(e), o.HEAPF32 = ke = new Float32Array(e), o.HEAPF64 = Ue = new Float64Array(e);
    }
    var Ce, Pe = [], Ie = [], je = [];
    function ae() {
      if (o.preRun)
        for (typeof o.preRun == "function" && (o.preRun = [o.preRun]); o.preRun.length; )
          it(o.preRun.shift());
      ut(Pe);
    }
    function Z() {
      ut(Ie);
    }
    function ot() {
      if (o.postRun)
        for (typeof o.postRun == "function" && (o.postRun = [o.postRun]); o.postRun.length; )
          st(o.postRun.shift());
      ut(je);
    }
    function it(e) {
      Pe.unshift(e);
    }
    function at(e) {
      Ie.unshift(e);
    }
    function st(e) {
      je.unshift(e);
    }
    var te = 0, pe = null;
    function Mr(e) {
      te++, o.monitorRunDependencies && o.monitorRunDependencies(te);
    }
    function Rr(e) {
      if (te--, o.monitorRunDependencies && o.monitorRunDependencies(te), te == 0 && pe) {
        var t = pe;
        pe = null, t();
      }
    }
    function we(e) {
      o.onAbort && o.onAbort(e), e = "Aborted(" + e + ")", C(e), F = !0, e += ". Build with -sASSERTIONS for more info.";
      var t = new WebAssembly.RuntimeError(e);
      throw d(t), t;
    }
    var xr = "data:application/octet-stream;base64,";
    function Tt(e) {
      return e.startsWith(xr);
    }
    var he;
    o.locateFile ? (he = "zxing_reader.wasm", Tt(he) || (he = S(he))) : he = new URL("/reader/zxing_reader.wasm", self.location).href;
    function Ot(e) {
      try {
        if (e == he && E)
          return new Uint8Array(E);
        if (P)
          return P(e);
        throw "both async and sync fetching of the wasm failed";
      } catch (t) {
        we(t);
      }
    }
    function kr(e) {
      return !E && (w || b) && typeof fetch == "function" ? fetch(e, { credentials: "same-origin" }).then((t) => {
        if (!t.ok)
          throw "failed to load wasm binary file at '" + e + "'";
        return t.arrayBuffer();
      }).catch(() => Ot(e)) : Promise.resolve().then(() => Ot(e));
    }
    function Et(e, t, r) {
      return kr(e).then((i) => WebAssembly.instantiate(i, t)).then((i) => i).then(r, (i) => {
        C("failed to asynchronously prepare wasm: " + i), we(i);
      });
    }
    function Ur(e, t, r, i) {
      return !e && typeof WebAssembly.instantiateStreaming == "function" && !Tt(t) && typeof fetch == "function" ? fetch(t, { credentials: "same-origin" }).then((s) => {
        var u = WebAssembly.instantiateStreaming(s, r);
        return u.then(i, function(l) {
          return C("wasm streaming compile failed: " + l), C("falling back to ArrayBuffer instantiation"), Et(t, r, i);
        });
      }) : Et(t, r, i);
    }
    function Fr() {
      var e = { a: go };
      function t(i, s) {
        var u = i.exports;
        return o.asm = u, A = o.asm.oa, Fe(), Ce = o.asm.sa, at(o.asm.pa), Rr(), u;
      }
      Mr();
      function r(i) {
        t(i.instance);
      }
      if (o.instantiateWasm)
        try {
          return o.instantiateWasm(e, t);
        } catch (i) {
          C("Module.instantiateWasm callback failed with error: " + i), d(i);
        }
      return Ur(E, he, e, r).catch(d), {};
    }
    function ut(e) {
      for (; e.length > 0; )
        e.shift()(o);
    }
    var We = [], Le = 0;
    function Ir(e) {
      var t = new He(e);
      return t.get_caught() || (t.set_caught(!0), Le--), t.set_rethrown(!1), We.push(t), Zt(t.excPtr), t.get_exception_ptr();
    }
    var re = 0;
    function jr() {
      D(0);
      var e = We.pop();
      Kt(e.excPtr), re = 0;
    }
    function He(e) {
      this.excPtr = e, this.ptr = e - 24, this.set_type = function(t) {
        V[this.ptr + 4 >> 2] = t;
      }, this.get_type = function() {
        return V[this.ptr + 4 >> 2];
      }, this.set_destructor = function(t) {
        V[this.ptr + 8 >> 2] = t;
      }, this.get_destructor = function() {
        return V[this.ptr + 8 >> 2];
      }, this.set_caught = function(t) {
        t = t ? 1 : 0, I[this.ptr + 12 >> 0] = t;
      }, this.get_caught = function() {
        return I[this.ptr + 12 >> 0] != 0;
      }, this.set_rethrown = function(t) {
        t = t ? 1 : 0, I[this.ptr + 13 >> 0] = t;
      }, this.get_rethrown = function() {
        return I[this.ptr + 13 >> 0] != 0;
      }, this.init = function(t, r) {
        this.set_adjusted_ptr(0), this.set_type(t), this.set_destructor(r);
      }, this.set_adjusted_ptr = function(t) {
        V[this.ptr + 16 >> 2] = t;
      }, this.get_adjusted_ptr = function() {
        return V[this.ptr + 16 >> 2];
      }, this.get_exception_ptr = function() {
        var t = er(this.get_type());
        if (t)
          return V[this.excPtr >> 2];
        var r = this.get_adjusted_ptr();
        return r !== 0 ? r : this.excPtr;
      };
    }
    function Wr(e) {
      throw re || (re = e), re;
    }
    function ct() {
      var e = re;
      if (!e)
        return Me(0), 0;
      var t = new He(e);
      t.set_adjusted_ptr(e);
      var r = t.get_type();
      if (!r)
        return Me(0), e;
      for (var i = 0; i < arguments.length; i++) {
        var s = arguments[i];
        if (s === 0 || s === r)
          break;
        var u = t.ptr + 16;
        if (Xt(s, r, u))
          return Me(s), e;
      }
      return Me(r), e;
    }
    var Lr = ct, Hr = ct, Vr = ct;
    function zr(e) {
      var t = new He(e).get_exception_ptr();
      return t;
    }
    function Br() {
      var e = We.pop();
      e || we("no exception to throw");
      var t = e.excPtr;
      throw e.get_rethrown() || (We.push(e), e.set_rethrown(!0), e.set_caught(!1), Le++), re = t, re;
    }
    function Nr(e, t, r) {
      var i = new He(e);
      throw i.init(t, r), re = e, Le++, re;
    }
    function Gr() {
      return Le;
    }
    var Ve = {};
    function At(e) {
      for (; e.length; ) {
        var t = e.pop(), r = e.pop();
        r(t);
      }
    }
    function $e(e) {
      return this.fromWireType(H[e >> 2]);
    }
    var _e = {}, me = {}, ze = {}, qr = 48, Yr = 57;
    function Dt(e) {
      if (e === void 0)
        return "_unknown";
      e = e.replace(/[^a-zA-Z0-9_]/g, "$");
      var t = e.charCodeAt(0);
      return t >= qr && t <= Yr ? `_${e}` : e;
    }
    function Mt(e, t) {
      return e = Dt(e), { [e]: function() {
        return t.apply(this, arguments);
      } }[e];
    }
    function ft(e, t) {
      var r = Mt(t, function(i) {
        this.name = t, this.message = i;
        var s = new Error(i).stack;
        s !== void 0 && (this.stack = this.toString() + `
` + s.replace(/^Error(:[^\n]*)?\n/, ""));
      });
      return r.prototype = Object.create(e.prototype), r.prototype.constructor = r, r.prototype.toString = function() {
        return this.message === void 0 ? this.name : `${this.name}: ${this.message}`;
      }, r;
    }
    var Rt = void 0;
    function Be(e) {
      throw new Rt(e);
    }
    function ve(e, t, r) {
      e.forEach(function(f) {
        ze[f] = t;
      });
      function i(f) {
        var h = r(f);
        h.length !== e.length && Be("Mismatched type converter count");
        for (var y = 0; y < e.length; ++y)
          ne(e[y], h[y]);
      }
      var s = new Array(t.length), u = [], l = 0;
      t.forEach((f, h) => {
        me.hasOwnProperty(f) ? s[h] = me[f] : (u.push(f), _e.hasOwnProperty(f) || (_e[f] = []), _e[f].push(() => {
          s[h] = me[f], ++l, l === u.length && i(s);
        }));
      }), u.length === 0 && i(s);
    }
    function Jr(e) {
      var t = Ve[e];
      delete Ve[e];
      var r = t.rawConstructor, i = t.rawDestructor, s = t.fields, u = s.map((l) => l.getterReturnType).concat(s.map((l) => l.setterArgumentType));
      ve([e], u, (l) => {
        var f = {};
        return s.forEach((h, y) => {
          var _ = h.fieldName, T = l[y], O = h.getter, x = h.getterContext, j = l[y + s.length], G = h.setter, W = h.setterContext;
          f[_] = { read: (q) => T.fromWireType(O(x, q)), write: (q, g) => {
            var $ = [];
            G(W, q, j.toWireType($, g)), At($);
          } };
        }), [{ name: t.name, fromWireType: function(h) {
          var y = {};
          for (var _ in f)
            y[_] = f[_].read(h);
          return i(h), y;
        }, toWireType: function(h, y) {
          for (var _ in f)
            if (!(_ in y))
              throw new TypeError(`Missing field: "${_}"`);
          var T = r();
          for (_ in f)
            f[_].write(T, y[_]);
          return h !== null && h.push(i, T), T;
        }, argPackAdvance: 8, readValueFromPointer: $e, destructorFunction: i }];
      });
    }
    function Qr(e, t, r, i, s) {
    }
    function lt(e) {
      switch (e) {
        case 1:
          return 0;
        case 2:
          return 1;
        case 4:
          return 2;
        case 8:
          return 3;
        default:
          throw new TypeError(`Unknown type size: ${e}`);
      }
    }
    function Kr() {
      for (var e = new Array(256), t = 0; t < 256; ++t)
        e[t] = String.fromCharCode(t);
      xt = e;
    }
    var xt = void 0;
    function Y(e) {
      for (var t = "", r = e; L[r]; )
        t += xt[L[r++]];
      return t;
    }
    var be = void 0;
    function k(e) {
      throw new be(e);
    }
    function ne(e, t, r = {}) {
      if (!("argPackAdvance" in t))
        throw new TypeError("registerType registeredInstance requires argPackAdvance");
      var i = t.name;
      if (e || k(`type "${i}" must have a positive integer typeid pointer`), me.hasOwnProperty(e)) {
        if (r.ignoreDuplicateRegistrations)
          return;
        k(`Cannot register type '${i}' twice`);
      }
      if (me[e] = t, delete ze[e], _e.hasOwnProperty(e)) {
        var s = _e[e];
        delete _e[e], s.forEach((u) => u());
      }
    }
    function Zr(e, t, r, i, s) {
      var u = lt(r);
      t = Y(t), ne(e, { name: t, fromWireType: function(l) {
        return !!l;
      }, toWireType: function(l, f) {
        return f ? i : s;
      }, argPackAdvance: 8, readValueFromPointer: function(l) {
        var f;
        if (r === 1)
          f = I;
        else if (r === 2)
          f = ee;
        else if (r === 4)
          f = H;
        else
          throw new TypeError("Unknown boolean type size: " + t);
        return this.fromWireType(f[l >> u]);
      }, destructorFunction: null });
    }
    function Xr(e) {
      if (!(this instanceof se) || !(e instanceof se))
        return !1;
      for (var t = this.$$.ptrType.registeredClass, r = this.$$.ptr, i = e.$$.ptrType.registeredClass, s = e.$$.ptr; t.baseClass; )
        r = t.upcast(r), t = t.baseClass;
      for (; i.baseClass; )
        s = i.upcast(s), i = i.baseClass;
      return t === i && r === s;
    }
    function en(e) {
      return { count: e.count, deleteScheduled: e.deleteScheduled, preservePointerOnDelete: e.preservePointerOnDelete, ptr: e.ptr, ptrType: e.ptrType, smartPtr: e.smartPtr, smartPtrType: e.smartPtrType };
    }
    function dt(e) {
      function t(r) {
        return r.$$.ptrType.registeredClass.name;
      }
      k(t(e) + " instance already deleted");
    }
    var pt = !1;
    function kt(e) {
    }
    function tn(e) {
      e.smartPtr ? e.smartPtrType.rawDestructor(e.smartPtr) : e.ptrType.registeredClass.rawDestructor(e.ptr);
    }
    function Ut(e) {
      e.count.value -= 1;
      var t = e.count.value === 0;
      t && tn(e);
    }
    function Ft(e, t, r) {
      if (t === r)
        return e;
      if (r.baseClass === void 0)
        return null;
      var i = Ft(e, t, r.baseClass);
      return i === null ? null : r.downcast(i);
    }
    var It = {};
    function rn() {
      return Object.keys(Ee).length;
    }
    function nn() {
      var e = [];
      for (var t in Ee)
        Ee.hasOwnProperty(t) && e.push(Ee[t]);
      return e;
    }
    var Te = [];
    function ht() {
      for (; Te.length; ) {
        var e = Te.pop();
        e.$$.deleteScheduled = !1, e.delete();
      }
    }
    var Oe = void 0;
    function on(e) {
      Oe = e, Te.length && Oe && Oe(ht);
    }
    function an() {
      o.getInheritedInstanceCount = rn, o.getLiveInheritedInstances = nn, o.flushPendingDeletes = ht, o.setDelayFunction = on;
    }
    var Ee = {};
    function sn(e, t) {
      for (t === void 0 && k("ptr should not be undefined"); e.baseClass; )
        t = e.upcast(t), e = e.baseClass;
      return t;
    }
    function un(e, t) {
      return t = sn(e, t), Ee[t];
    }
    function Ne(e, t) {
      (!t.ptrType || !t.ptr) && Be("makeClassHandle requires ptr and ptrType");
      var r = !!t.smartPtrType, i = !!t.smartPtr;
      return r !== i && Be("Both smartPtrType and smartPtr must be specified"), t.count = { value: 1 }, Ae(Object.create(e, { $$: { value: t } }));
    }
    function cn(e) {
      var t = this.getPointee(e);
      if (!t)
        return this.destructor(e), null;
      var r = un(this.registeredClass, t);
      if (r !== void 0) {
        if (r.$$.count.value === 0)
          return r.$$.ptr = t, r.$$.smartPtr = e, r.clone();
        var i = r.clone();
        return this.destructor(e), i;
      }
      function s() {
        return this.isSmartPointer ? Ne(this.registeredClass.instancePrototype, { ptrType: this.pointeeType, ptr: t, smartPtrType: this, smartPtr: e }) : Ne(this.registeredClass.instancePrototype, { ptrType: this, ptr: e });
      }
      var u = this.registeredClass.getActualType(t), l = It[u];
      if (!l)
        return s.call(this);
      var f;
      this.isConst ? f = l.constPointerType : f = l.pointerType;
      var h = Ft(t, this.registeredClass, f.registeredClass);
      return h === null ? s.call(this) : this.isSmartPointer ? Ne(f.registeredClass.instancePrototype, { ptrType: f, ptr: h, smartPtrType: this, smartPtr: e }) : Ne(f.registeredClass.instancePrototype, { ptrType: f, ptr: h });
    }
    function Ae(e) {
      return typeof FinalizationRegistry > "u" ? (Ae = (t) => t, e) : (pt = new FinalizationRegistry((t) => {
        Ut(t.$$);
      }), Ae = (t) => {
        var r = t.$$, i = !!r.smartPtr;
        if (i) {
          var s = { $$: r };
          pt.register(t, s, t);
        }
        return t;
      }, kt = (t) => pt.unregister(t), Ae(e));
    }
    function fn() {
      if (this.$$.ptr || dt(this), this.$$.preservePointerOnDelete)
        return this.$$.count.value += 1, this;
      var e = Ae(Object.create(Object.getPrototypeOf(this), { $$: { value: en(this.$$) } }));
      return e.$$.count.value += 1, e.$$.deleteScheduled = !1, e;
    }
    function ln() {
      this.$$.ptr || dt(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && k("Object already scheduled for deletion"), kt(this), Ut(this.$$), this.$$.preservePointerOnDelete || (this.$$.smartPtr = void 0, this.$$.ptr = void 0);
    }
    function dn() {
      return !this.$$.ptr;
    }
    function pn() {
      return this.$$.ptr || dt(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && k("Object already scheduled for deletion"), Te.push(this), Te.length === 1 && Oe && Oe(ht), this.$$.deleteScheduled = !0, this;
    }
    function hn() {
      se.prototype.isAliasOf = Xr, se.prototype.clone = fn, se.prototype.delete = ln, se.prototype.isDeleted = dn, se.prototype.deleteLater = pn;
    }
    function se() {
    }
    function jt(e, t, r) {
      if (e[t].overloadTable === void 0) {
        var i = e[t];
        e[t] = function() {
          return e[t].overloadTable.hasOwnProperty(arguments.length) || k(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`), e[t].overloadTable[arguments.length].apply(this, arguments);
        }, e[t].overloadTable = [], e[t].overloadTable[i.argCount] = i;
      }
    }
    function Wt(e, t, r) {
      o.hasOwnProperty(e) ? ((r === void 0 || o[e].overloadTable !== void 0 && o[e].overloadTable[r] !== void 0) && k(`Cannot register public name '${e}' twice`), jt(o, e, e), o.hasOwnProperty(r) && k(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`), o[e].overloadTable[r] = t) : (o[e] = t, r !== void 0 && (o[e].numArguments = r));
    }
    function mn(e, t, r, i, s, u, l, f) {
      this.name = e, this.constructor = t, this.instancePrototype = r, this.rawDestructor = i, this.baseClass = s, this.getActualType = u, this.upcast = l, this.downcast = f, this.pureVirtualFunctions = [];
    }
    function mt(e, t, r) {
      for (; t !== r; )
        t.upcast || k(`Expected null or instance of ${r.name}, got an instance of ${t.name}`), e = t.upcast(e), t = t.baseClass;
      return e;
    }
    function vn(e, t) {
      if (t === null)
        return this.isReference && k(`null is not a valid ${this.name}`), 0;
      t.$$ || k(`Cannot pass "${gt(t)}" as a ${this.name}`), t.$$.ptr || k(`Cannot pass deleted object as a pointer of type ${this.name}`);
      var r = t.$$.ptrType.registeredClass, i = mt(t.$$.ptr, r, this.registeredClass);
      return i;
    }
    function yn(e, t) {
      var r;
      if (t === null)
        return this.isReference && k(`null is not a valid ${this.name}`), this.isSmartPointer ? (r = this.rawConstructor(), e !== null && e.push(this.rawDestructor, r), r) : 0;
      t.$$ || k(`Cannot pass "${gt(t)}" as a ${this.name}`), t.$$.ptr || k(`Cannot pass deleted object as a pointer of type ${this.name}`), !this.isConst && t.$$.ptrType.isConst && k(`Cannot convert argument of type ${t.$$.smartPtrType ? t.$$.smartPtrType.name : t.$$.ptrType.name} to parameter type ${this.name}`);
      var i = t.$$.ptrType.registeredClass;
      if (r = mt(t.$$.ptr, i, this.registeredClass), this.isSmartPointer)
        switch (t.$$.smartPtr === void 0 && k("Passing raw pointer to smart pointer is illegal"), this.sharingPolicy) {
          case 0:
            t.$$.smartPtrType === this ? r = t.$$.smartPtr : k(`Cannot convert argument of type ${t.$$.smartPtrType ? t.$$.smartPtrType.name : t.$$.ptrType.name} to parameter type ${this.name}`);
            break;
          case 1:
            r = t.$$.smartPtr;
            break;
          case 2:
            if (t.$$.smartPtrType === this)
              r = t.$$.smartPtr;
            else {
              var s = t.clone();
              r = this.rawShare(r, Ye.toHandle(function() {
                s.delete();
              })), e !== null && e.push(this.rawDestructor, r);
            }
            break;
          default:
            k("Unsupporting sharing policy");
        }
      return r;
    }
    function gn(e, t) {
      if (t === null)
        return this.isReference && k(`null is not a valid ${this.name}`), 0;
      t.$$ || k(`Cannot pass "${gt(t)}" as a ${this.name}`), t.$$.ptr || k(`Cannot pass deleted object as a pointer of type ${this.name}`), t.$$.ptrType.isConst && k(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);
      var r = t.$$.ptrType.registeredClass, i = mt(t.$$.ptr, r, this.registeredClass);
      return i;
    }
    function Cn(e) {
      return this.rawGetPointee && (e = this.rawGetPointee(e)), e;
    }
    function wn(e) {
      this.rawDestructor && this.rawDestructor(e);
    }
    function _n(e) {
      e !== null && e.delete();
    }
    function bn() {
      oe.prototype.getPointee = Cn, oe.prototype.destructor = wn, oe.prototype.argPackAdvance = 8, oe.prototype.readValueFromPointer = $e, oe.prototype.deleteObject = _n, oe.prototype.fromWireType = cn;
    }
    function oe(e, t, r, i, s, u, l, f, h, y, _) {
      this.name = e, this.registeredClass = t, this.isReference = r, this.isConst = i, this.isSmartPointer = s, this.pointeeType = u, this.sharingPolicy = l, this.rawGetPointee = f, this.rawConstructor = h, this.rawShare = y, this.rawDestructor = _, !s && t.baseClass === void 0 ? i ? (this.toWireType = vn, this.destructorFunction = null) : (this.toWireType = gn, this.destructorFunction = null) : this.toWireType = yn;
    }
    function Lt(e, t, r) {
      o.hasOwnProperty(e) || Be("Replacing nonexistant public symbol"), o[e].overloadTable !== void 0 && r !== void 0 ? o[e].overloadTable[r] = t : (o[e] = t, o[e].argCount = r);
    }
    function Sn(e, t, r) {
      var i = o["dynCall_" + e];
      return r && r.length ? i.apply(null, [t].concat(r)) : i.call(null, t);
    }
    var Ge = [];
    function U(e) {
      var t = Ge[e];
      return t || (e >= Ge.length && (Ge.length = e + 1), Ge[e] = t = Ce.get(e)), t;
    }
    function Pn(e, t, r) {
      if (e.includes("j"))
        return Sn(e, t, r);
      var i = U(t).apply(null, r);
      return i;
    }
    function $n(e, t) {
      var r = [];
      return function() {
        return r.length = 0, Object.assign(r, arguments), Pn(e, t, r);
      };
    }
    function K(e, t) {
      e = Y(e);
      function r() {
        return e.includes("j") ? $n(e, t) : U(t);
      }
      var i = r();
      return typeof i != "function" && k(`unknown function pointer with signature ${e}: ${t}`), i;
    }
    var Ht = void 0;
    function Vt(e) {
      var t = Qt(e), r = Y(t);
      return ie(t), r;
    }
    function qe(e, t) {
      var r = [], i = {};
      function s(u) {
        if (!i[u] && !me[u]) {
          if (ze[u]) {
            ze[u].forEach(s);
            return;
          }
          r.push(u), i[u] = !0;
        }
      }
      throw t.forEach(s), new Ht(`${e}: ` + r.map(Vt).join([", "]));
    }
    function Tn(e, t, r, i, s, u, l, f, h, y, _, T, O) {
      _ = Y(_), u = K(s, u), f && (f = K(l, f)), y && (y = K(h, y)), O = K(T, O);
      var x = Dt(_);
      Wt(x, function() {
        qe(`Cannot construct ${_} due to unbound types`, [i]);
      }), ve([e, t, r], i ? [i] : [], function(j) {
        j = j[0];
        var G, W;
        i ? (G = j.registeredClass, W = G.instancePrototype) : W = se.prototype;
        var q = Mt(x, function() {
          if (Object.getPrototypeOf(this) !== g)
            throw new be("Use 'new' to construct " + _);
          if ($.constructor_body === void 0)
            throw new be(_ + " has no accessible constructor");
          var Ke = $.constructor_body[arguments.length];
          if (Ke === void 0)
            throw new be(`Tried to invoke ctor of ${_} with invalid number of parameters (${arguments.length}) - expected (${Object.keys($.constructor_body).toString()}) parameters instead!`);
          return Ke.apply(this, arguments);
        }), g = Object.create(W, { constructor: { value: q } });
        q.prototype = g;
        var $ = new mn(_, q, g, O, G, u, f, y);
        $.baseClass && ($.baseClass.__derivedClasses === void 0 && ($.baseClass.__derivedClasses = []), $.baseClass.__derivedClasses.push($));
        var z = new oe(_, $, !0, !1, !1), N = new oe(_ + "*", $, !1, !1, !1), ye = new oe(_ + " const*", $, !1, !0, !1);
        return It[e] = { pointerType: N, constPointerType: ye }, Lt(x, q), [z, N, ye];
      });
    }
    function vt(e, t) {
      for (var r = [], i = 0; i < e; i++)
        r.push(V[t + i * 4 >> 2]);
      return r;
    }
    function yt(e, t, r, i, s, u) {
      var l = t.length;
      l < 2 && k("argTypes array size mismatch! Must at least get return value and 'this' types!");
      for (var f = t[1] !== null && r !== null, h = !1, y = 1; y < t.length; ++y)
        if (t[y] !== null && t[y].destructorFunction === void 0) {
          h = !0;
          break;
        }
      var _ = t[0].name !== "void", T = l - 2, O = new Array(T), x = [], j = [];
      return function() {
        arguments.length !== T && k(`function ${e} called with ${arguments.length} arguments, expected ${T} args!`), j.length = 0;
        var G;
        x.length = f ? 2 : 1, x[0] = s, f && (G = t[1].toWireType(j, this), x[1] = G);
        for (var W = 0; W < T; ++W)
          O[W] = t[W + 2].toWireType(j, arguments[W]), x.push(O[W]);
        var q = i.apply(null, x);
        function g($) {
          if (h)
            At(j);
          else
            for (var z = f ? 1 : 2; z < t.length; z++) {
              var N = z === 1 ? G : O[z - 2];
              t[z].destructorFunction !== null && t[z].destructorFunction(N);
            }
          if (_)
            return t[0].fromWireType($);
        }
        return g(q);
      };
    }
    function On(e, t, r, i, s, u) {
      B(t > 0);
      var l = vt(t, r);
      s = K(i, s), ve([], [e], function(f) {
        f = f[0];
        var h = `constructor ${f.name}`;
        if (f.registeredClass.constructor_body === void 0 && (f.registeredClass.constructor_body = []), f.registeredClass.constructor_body[t - 1] !== void 0)
          throw new be(`Cannot register multiple constructors with identical number of parameters (${t - 1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);
        return f.registeredClass.constructor_body[t - 1] = () => {
          qe(`Cannot construct ${f.name} due to unbound types`, l);
        }, ve([], l, function(y) {
          return y.splice(1, 0, null), f.registeredClass.constructor_body[t - 1] = yt(h, y, null, s, u), [];
        }), [];
      });
    }
    function En(e, t, r, i, s, u, l, f, h) {
      var y = vt(r, i);
      t = Y(t), u = K(s, u), ve([], [e], function(_) {
        _ = _[0];
        var T = `${_.name}.${t}`;
        t.startsWith("@@") && (t = Symbol[t.substring(2)]), f && _.registeredClass.pureVirtualFunctions.push(t);
        function O() {
          qe(`Cannot call ${T} due to unbound types`, y);
        }
        var x = _.registeredClass.instancePrototype, j = x[t];
        return j === void 0 || j.overloadTable === void 0 && j.className !== _.name && j.argCount === r - 2 ? (O.argCount = r - 2, O.className = _.name, x[t] = O) : (jt(x, t, T), x[t].overloadTable[r - 2] = O), ve([], y, function(G) {
          var W = yt(T, G, _, u, l);
          return x[t].overloadTable === void 0 ? (W.argCount = r - 2, x[t] = W) : x[t].overloadTable[r - 2] = W, [];
        }), [];
      });
    }
    function An() {
      this.allocated = [void 0], this.freelist = [], this.get = function(e) {
        return this.allocated[e];
      }, this.has = function(e) {
        return this.allocated[e] !== void 0;
      }, this.allocate = function(e) {
        var t = this.freelist.pop() || this.allocated.length;
        return this.allocated[t] = e, t;
      }, this.free = function(e) {
        this.allocated[e] = void 0, this.freelist.push(e);
      };
    }
    var Q = new An();
    function zt(e) {
      e >= Q.reserved && --Q.get(e).refcount === 0 && Q.free(e);
    }
    function Dn() {
      for (var e = 0, t = Q.reserved; t < Q.allocated.length; ++t)
        Q.allocated[t] !== void 0 && ++e;
      return e;
    }
    function Mn() {
      Q.allocated.push({ value: void 0 }, { value: null }, { value: !0 }, { value: !1 }), Q.reserved = Q.allocated.length, o.count_emval_handles = Dn;
    }
    var Ye = { toValue: (e) => (e || k("Cannot use deleted val. handle = " + e), Q.get(e).value), toHandle: (e) => {
      switch (e) {
        case void 0:
          return 1;
        case null:
          return 2;
        case !0:
          return 3;
        case !1:
          return 4;
        default:
          return Q.allocate({ refcount: 1, value: e });
      }
    } };
    function Rn(e, t) {
      t = Y(t), ne(e, { name: t, fromWireType: function(r) {
        var i = Ye.toValue(r);
        return zt(r), i;
      }, toWireType: function(r, i) {
        return Ye.toHandle(i);
      }, argPackAdvance: 8, readValueFromPointer: $e, destructorFunction: null });
    }
    function gt(e) {
      if (e === null)
        return "null";
      var t = typeof e;
      return t === "object" || t === "array" || t === "function" ? e.toString() : "" + e;
    }
    function xn(e, t) {
      switch (t) {
        case 2:
          return function(r) {
            return this.fromWireType(ke[r >> 2]);
          };
        case 3:
          return function(r) {
            return this.fromWireType(Ue[r >> 3]);
          };
        default:
          throw new TypeError("Unknown float type: " + e);
      }
    }
    function kn(e, t, r) {
      var i = lt(r);
      t = Y(t), ne(e, { name: t, fromWireType: function(s) {
        return s;
      }, toWireType: function(s, u) {
        return u;
      }, argPackAdvance: 8, readValueFromPointer: xn(t, i), destructorFunction: null });
    }
    function Un(e, t, r, i, s, u, l) {
      var f = vt(t, r);
      e = Y(e), s = K(i, s), Wt(e, function() {
        qe(`Cannot call ${e} due to unbound types`, f);
      }, t - 1), ve([], f, function(h) {
        var y = [h[0], null].concat(h.slice(1));
        return Lt(e, yt(e, y, null, s, u), t - 1), [];
      });
    }
    function Fn(e, t, r) {
      switch (t) {
        case 0:
          return r ? function(i) {
            return I[i];
          } : function(i) {
            return L[i];
          };
        case 1:
          return r ? function(i) {
            return ee[i >> 1];
          } : function(i) {
            return de[i >> 1];
          };
        case 2:
          return r ? function(i) {
            return H[i >> 2];
          } : function(i) {
            return V[i >> 2];
          };
        default:
          throw new TypeError("Unknown integer type: " + e);
      }
    }
    function In(e, t, r, i, s) {
      t = Y(t);
      var u = lt(r), l = (T) => T;
      if (i === 0) {
        var f = 32 - 8 * r;
        l = (T) => T << f >>> f;
      }
      var h = t.includes("unsigned"), y = (T, O) => {
      }, _;
      h ? _ = function(T, O) {
        return y(O, this.name), O >>> 0;
      } : _ = function(T, O) {
        return y(O, this.name), O;
      }, ne(e, { name: t, fromWireType: l, toWireType: _, argPackAdvance: 8, readValueFromPointer: Fn(t, u, i !== 0), destructorFunction: null });
    }
    function jn(e, t, r) {
      var i = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array], s = i[t];
      function u(l) {
        l = l >> 2;
        var f = V, h = f[l], y = f[l + 1];
        return new s(f.buffer, y, h);
      }
      r = Y(r), ne(e, { name: r, fromWireType: u, argPackAdvance: 8, readValueFromPointer: u }, { ignoreDuplicateRegistrations: !0 });
    }
    function Bt(e, t, r, i) {
      if (!(i > 0))
        return 0;
      for (var s = r, u = r + i - 1, l = 0; l < e.length; ++l) {
        var f = e.charCodeAt(l);
        if (f >= 55296 && f <= 57343) {
          var h = e.charCodeAt(++l);
          f = 65536 + ((f & 1023) << 10) | h & 1023;
        }
        if (f <= 127) {
          if (r >= u)
            break;
          t[r++] = f;
        } else if (f <= 2047) {
          if (r + 1 >= u)
            break;
          t[r++] = 192 | f >> 6, t[r++] = 128 | f & 63;
        } else if (f <= 65535) {
          if (r + 2 >= u)
            break;
          t[r++] = 224 | f >> 12, t[r++] = 128 | f >> 6 & 63, t[r++] = 128 | f & 63;
        } else {
          if (r + 3 >= u)
            break;
          t[r++] = 240 | f >> 18, t[r++] = 128 | f >> 12 & 63, t[r++] = 128 | f >> 6 & 63, t[r++] = 128 | f & 63;
        }
      }
      return t[r] = 0, r - s;
    }
    function Wn(e, t, r) {
      return Bt(e, L, t, r);
    }
    function Nt(e) {
      for (var t = 0, r = 0; r < e.length; ++r) {
        var i = e.charCodeAt(r);
        i <= 127 ? t++ : i <= 2047 ? t += 2 : i >= 55296 && i <= 57343 ? (t += 4, ++r) : t += 3;
      }
      return t;
    }
    var Gt = typeof TextDecoder < "u" ? new TextDecoder("utf8") : void 0;
    function Ln(e, t, r) {
      for (var i = t + r, s = t; e[s] && !(s >= i); )
        ++s;
      if (s - t > 16 && e.buffer && Gt)
        return Gt.decode(e.subarray(t, s));
      for (var u = ""; t < s; ) {
        var l = e[t++];
        if (!(l & 128)) {
          u += String.fromCharCode(l);
          continue;
        }
        var f = e[t++] & 63;
        if ((l & 224) == 192) {
          u += String.fromCharCode((l & 31) << 6 | f);
          continue;
        }
        var h = e[t++] & 63;
        if ((l & 240) == 224 ? l = (l & 15) << 12 | f << 6 | h : l = (l & 7) << 18 | f << 12 | h << 6 | e[t++] & 63, l < 65536)
          u += String.fromCharCode(l);
        else {
          var y = l - 65536;
          u += String.fromCharCode(55296 | y >> 10, 56320 | y & 1023);
        }
      }
      return u;
    }
    function Ct(e, t) {
      return e ? Ln(L, e, t) : "";
    }
    function Hn(e, t) {
      t = Y(t);
      var r = t === "std::string";
      ne(e, { name: t, fromWireType: function(i) {
        var s = V[i >> 2], u = i + 4, l;
        if (r)
          for (var f = u, h = 0; h <= s; ++h) {
            var y = u + h;
            if (h == s || L[y] == 0) {
              var _ = y - f, T = Ct(f, _);
              l === void 0 ? l = T : (l += String.fromCharCode(0), l += T), f = y + 1;
            }
          }
        else {
          for (var O = new Array(s), h = 0; h < s; ++h)
            O[h] = String.fromCharCode(L[u + h]);
          l = O.join("");
        }
        return ie(i), l;
      }, toWireType: function(i, s) {
        s instanceof ArrayBuffer && (s = new Uint8Array(s));
        var u, l = typeof s == "string";
        l || s instanceof Uint8Array || s instanceof Uint8ClampedArray || s instanceof Int8Array || k("Cannot pass non-string to std::string"), r && l ? u = Nt(s) : u = s.length;
        var f = _t(4 + u + 1), h = f + 4;
        if (V[f >> 2] = u, r && l)
          Wn(s, h, u + 1);
        else if (l)
          for (var y = 0; y < u; ++y) {
            var _ = s.charCodeAt(y);
            _ > 255 && (ie(h), k("String has UTF-16 code units that do not fit in 8 bits")), L[h + y] = _;
          }
        else
          for (var y = 0; y < u; ++y)
            L[h + y] = s[y];
        return i !== null && i.push(ie, f), f;
      }, argPackAdvance: 8, readValueFromPointer: $e, destructorFunction: function(i) {
        ie(i);
      } });
    }
    var qt = typeof TextDecoder < "u" ? new TextDecoder("utf-16le") : void 0;
    function Vn(e, t) {
      for (var r = e, i = r >> 1, s = i + t / 2; !(i >= s) && de[i]; )
        ++i;
      if (r = i << 1, r - e > 32 && qt)
        return qt.decode(L.subarray(e, r));
      for (var u = "", l = 0; !(l >= t / 2); ++l) {
        var f = ee[e + l * 2 >> 1];
        if (f == 0)
          break;
        u += String.fromCharCode(f);
      }
      return u;
    }
    function zn(e, t, r) {
      if (r === void 0 && (r = 2147483647), r < 2)
        return 0;
      r -= 2;
      for (var i = t, s = r < e.length * 2 ? r / 2 : e.length, u = 0; u < s; ++u) {
        var l = e.charCodeAt(u);
        ee[t >> 1] = l, t += 2;
      }
      return ee[t >> 1] = 0, t - i;
    }
    function Bn(e) {
      return e.length * 2;
    }
    function Nn(e, t) {
      for (var r = 0, i = ""; !(r >= t / 4); ) {
        var s = H[e + r * 4 >> 2];
        if (s == 0)
          break;
        if (++r, s >= 65536) {
          var u = s - 65536;
          i += String.fromCharCode(55296 | u >> 10, 56320 | u & 1023);
        } else
          i += String.fromCharCode(s);
      }
      return i;
    }
    function Gn(e, t, r) {
      if (r === void 0 && (r = 2147483647), r < 4)
        return 0;
      for (var i = t, s = i + r - 4, u = 0; u < e.length; ++u) {
        var l = e.charCodeAt(u);
        if (l >= 55296 && l <= 57343) {
          var f = e.charCodeAt(++u);
          l = 65536 + ((l & 1023) << 10) | f & 1023;
        }
        if (H[t >> 2] = l, t += 4, t + 4 > s)
          break;
      }
      return H[t >> 2] = 0, t - i;
    }
    function qn(e) {
      for (var t = 0, r = 0; r < e.length; ++r) {
        var i = e.charCodeAt(r);
        i >= 55296 && i <= 57343 && ++r, t += 4;
      }
      return t;
    }
    function Yn(e, t, r) {
      r = Y(r);
      var i, s, u, l, f;
      t === 2 ? (i = Vn, s = zn, l = Bn, u = () => de, f = 1) : t === 4 && (i = Nn, s = Gn, l = qn, u = () => V, f = 2), ne(e, { name: r, fromWireType: function(h) {
        for (var y = V[h >> 2], _ = u(), T, O = h + 4, x = 0; x <= y; ++x) {
          var j = h + 4 + x * t;
          if (x == y || _[j >> f] == 0) {
            var G = j - O, W = i(O, G);
            T === void 0 ? T = W : (T += String.fromCharCode(0), T += W), O = j + t;
          }
        }
        return ie(h), T;
      }, toWireType: function(h, y) {
        typeof y != "string" && k(`Cannot pass non-string to C++ string type ${r}`);
        var _ = l(y), T = _t(4 + _ + t);
        return V[T >> 2] = _ >> f, s(y, T + 4, _ + t), h !== null && h.push(ie, T), T;
      }, argPackAdvance: 8, readValueFromPointer: $e, destructorFunction: function(h) {
        ie(h);
      } });
    }
    function Jn(e, t, r, i, s, u) {
      Ve[e] = { name: Y(t), rawConstructor: K(r, i), rawDestructor: K(s, u), fields: [] };
    }
    function Qn(e, t, r, i, s, u, l, f, h, y) {
      Ve[e].fields.push({ fieldName: Y(t), getterReturnType: r, getter: K(i, s), getterContext: u, setterArgumentType: l, setter: K(f, h), setterContext: y });
    }
    function Kn(e, t) {
      t = Y(t), ne(e, { isVoid: !0, name: t, argPackAdvance: 0, fromWireType: function() {
      }, toWireType: function(r, i) {
      } });
    }
    function Zn(e) {
      e > 4 && (Q.get(e).refcount += 1);
    }
    function Xn(e, t) {
      var r = me[e];
      return r === void 0 && k(t + " has unknown type " + Vt(e)), r;
    }
    function eo(e, t) {
      e = Xn(e, "_emval_take_value");
      var r = e.readValueFromPointer(t);
      return Ye.toHandle(r);
    }
    function to() {
      we("");
    }
    function ro(e, t, r) {
      L.copyWithin(e, t, t + r);
    }
    function no() {
      return 2147483648;
    }
    function oo(e) {
      var t = A.buffer, r = e - t.byteLength + 65535 >>> 16;
      try {
        return A.grow(r), Fe(), 1;
      } catch {
      }
    }
    function io(e) {
      var t = L.length;
      e = e >>> 0;
      var r = no();
      if (e > r)
        return !1;
      for (var i = (h, y) => h + (y - h % y) % y, s = 1; s <= 4; s *= 2) {
        var u = t * (1 + 0.2 / s);
        u = Math.min(u, e + 100663296);
        var l = Math.min(r, i(Math.max(e, u), 65536)), f = oo(l);
        if (f)
          return !0;
      }
      return !1;
    }
    var wt = {};
    function ao() {
      return m || "./this.program";
    }
    function De() {
      if (!De.strings) {
        var e = (typeof navigator == "object" && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", t = { USER: "web_user", LOGNAME: "web_user", PATH: "/", PWD: "/", HOME: "/home/web_user", LANG: e, _: ao() };
        for (var r in wt)
          wt[r] === void 0 ? delete t[r] : t[r] = wt[r];
        var i = [];
        for (var r in t)
          i.push(`${r}=${t[r]}`);
        De.strings = i;
      }
      return De.strings;
    }
    function so(e, t) {
      for (var r = 0; r < e.length; ++r)
        I[t++ >> 0] = e.charCodeAt(r);
      I[t >> 0] = 0;
    }
    function uo(e, t) {
      var r = 0;
      return De().forEach(function(i, s) {
        var u = t + r;
        V[e + s * 4 >> 2] = u, so(i, u), r += i.length + 1;
      }), 0;
    }
    function co(e, t) {
      var r = De();
      V[e >> 2] = r.length;
      var i = 0;
      return r.forEach(function(s) {
        i += s.length + 1;
      }), V[t >> 2] = i, 0;
    }
    function fo(e) {
      return e;
    }
    function Je(e) {
      return e % 4 === 0 && (e % 100 !== 0 || e % 400 === 0);
    }
    function lo(e, t) {
      for (var r = 0, i = 0; i <= t; r += e[i++])
        ;
      return r;
    }
    var Yt = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], Jt = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    function po(e, t) {
      for (var r = new Date(e.getTime()); t > 0; ) {
        var i = Je(r.getFullYear()), s = r.getMonth(), u = (i ? Yt : Jt)[s];
        if (t > u - r.getDate())
          t -= u - r.getDate() + 1, r.setDate(1), s < 11 ? r.setMonth(s + 1) : (r.setMonth(0), r.setFullYear(r.getFullYear() + 1));
        else
          return r.setDate(r.getDate() + t), r;
      }
      return r;
    }
    function ho(e, t, r) {
      var i = r > 0 ? r : Nt(e) + 1, s = new Array(i), u = Bt(e, s, 0, s.length);
      return t && (s.length = u), s;
    }
    function mo(e, t) {
      I.set(e, t);
    }
    function vo(e, t, r, i) {
      var s = H[i + 40 >> 2], u = { tm_sec: H[i >> 2], tm_min: H[i + 4 >> 2], tm_hour: H[i + 8 >> 2], tm_mday: H[i + 12 >> 2], tm_mon: H[i + 16 >> 2], tm_year: H[i + 20 >> 2], tm_wday: H[i + 24 >> 2], tm_yday: H[i + 28 >> 2], tm_isdst: H[i + 32 >> 2], tm_gmtoff: H[i + 36 >> 2], tm_zone: s ? Ct(s) : "" }, l = Ct(r), f = { "%c": "%a %b %d %H:%M:%S %Y", "%D": "%m/%d/%y", "%F": "%Y-%m-%d", "%h": "%b", "%r": "%I:%M:%S %p", "%R": "%H:%M", "%T": "%H:%M:%S", "%x": "%m/%d/%y", "%X": "%H:%M:%S", "%Ec": "%c", "%EC": "%C", "%Ex": "%m/%d/%y", "%EX": "%H:%M:%S", "%Ey": "%y", "%EY": "%Y", "%Od": "%d", "%Oe": "%e", "%OH": "%H", "%OI": "%I", "%Om": "%m", "%OM": "%M", "%OS": "%S", "%Ou": "%u", "%OU": "%U", "%OV": "%V", "%Ow": "%w", "%OW": "%W", "%Oy": "%y" };
      for (var h in f)
        l = l.replace(new RegExp(h, "g"), f[h]);
      var y = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], _ = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      function T(g, $, z) {
        for (var N = typeof g == "number" ? g.toString() : g || ""; N.length < $; )
          N = z[0] + N;
        return N;
      }
      function O(g, $) {
        return T(g, $, "0");
      }
      function x(g, $) {
        function z(ye) {
          return ye < 0 ? -1 : ye > 0 ? 1 : 0;
        }
        var N;
        return (N = z(g.getFullYear() - $.getFullYear())) === 0 && (N = z(g.getMonth() - $.getMonth())) === 0 && (N = z(g.getDate() - $.getDate())), N;
      }
      function j(g) {
        switch (g.getDay()) {
          case 0:
            return new Date(g.getFullYear() - 1, 11, 29);
          case 1:
            return g;
          case 2:
            return new Date(g.getFullYear(), 0, 3);
          case 3:
            return new Date(g.getFullYear(), 0, 2);
          case 4:
            return new Date(g.getFullYear(), 0, 1);
          case 5:
            return new Date(g.getFullYear() - 1, 11, 31);
          case 6:
            return new Date(g.getFullYear() - 1, 11, 30);
        }
      }
      function G(g) {
        var $ = po(new Date(g.tm_year + 1900, 0, 1), g.tm_yday), z = new Date($.getFullYear(), 0, 4), N = new Date($.getFullYear() + 1, 0, 4), ye = j(z), Ke = j(N);
        return x(ye, $) <= 0 ? x(Ke, $) <= 0 ? $.getFullYear() + 1 : $.getFullYear() : $.getFullYear() - 1;
      }
      var W = { "%a": function(g) {
        return y[g.tm_wday].substring(0, 3);
      }, "%A": function(g) {
        return y[g.tm_wday];
      }, "%b": function(g) {
        return _[g.tm_mon].substring(0, 3);
      }, "%B": function(g) {
        return _[g.tm_mon];
      }, "%C": function(g) {
        var $ = g.tm_year + 1900;
        return O($ / 100 | 0, 2);
      }, "%d": function(g) {
        return O(g.tm_mday, 2);
      }, "%e": function(g) {
        return T(g.tm_mday, 2, " ");
      }, "%g": function(g) {
        return G(g).toString().substring(2);
      }, "%G": function(g) {
        return G(g);
      }, "%H": function(g) {
        return O(g.tm_hour, 2);
      }, "%I": function(g) {
        var $ = g.tm_hour;
        return $ == 0 ? $ = 12 : $ > 12 && ($ -= 12), O($, 2);
      }, "%j": function(g) {
        return O(g.tm_mday + lo(Je(g.tm_year + 1900) ? Yt : Jt, g.tm_mon - 1), 3);
      }, "%m": function(g) {
        return O(g.tm_mon + 1, 2);
      }, "%M": function(g) {
        return O(g.tm_min, 2);
      }, "%n": function() {
        return `
`;
      }, "%p": function(g) {
        return g.tm_hour >= 0 && g.tm_hour < 12 ? "AM" : "PM";
      }, "%S": function(g) {
        return O(g.tm_sec, 2);
      }, "%t": function() {
        return "	";
      }, "%u": function(g) {
        return g.tm_wday || 7;
      }, "%U": function(g) {
        var $ = g.tm_yday + 7 - g.tm_wday;
        return O(Math.floor($ / 7), 2);
      }, "%V": function(g) {
        var $ = Math.floor((g.tm_yday + 7 - (g.tm_wday + 6) % 7) / 7);
        if ((g.tm_wday + 371 - g.tm_yday - 2) % 7 <= 2 && $++, $) {
          if ($ == 53) {
            var z = (g.tm_wday + 371 - g.tm_yday) % 7;
            z != 4 && (z != 3 || !Je(g.tm_year)) && ($ = 1);
          }
        } else {
          $ = 52;
          var N = (g.tm_wday + 7 - g.tm_yday - 1) % 7;
          (N == 4 || N == 5 && Je(g.tm_year % 400 - 1)) && $++;
        }
        return O($, 2);
      }, "%w": function(g) {
        return g.tm_wday;
      }, "%W": function(g) {
        var $ = g.tm_yday + 7 - (g.tm_wday + 6) % 7;
        return O(Math.floor($ / 7), 2);
      }, "%y": function(g) {
        return (g.tm_year + 1900).toString().substring(2);
      }, "%Y": function(g) {
        return g.tm_year + 1900;
      }, "%z": function(g) {
        var $ = g.tm_gmtoff, z = $ >= 0;
        return $ = Math.abs($) / 60, $ = $ / 60 * 100 + $ % 60, (z ? "+" : "-") + ("0000" + $).slice(-4);
      }, "%Z": function(g) {
        return g.tm_zone;
      }, "%%": function() {
        return "%";
      } };
      l = l.replace(/%%/g, "\0\0");
      for (var h in W)
        l.includes(h) && (l = l.replace(new RegExp(h, "g"), W[h](u)));
      l = l.replace(/\0\0/g, "%");
      var q = ho(l, !1);
      return q.length > t ? 0 : (mo(q, e), q.length - 1);
    }
    function yo(e, t, r, i, s) {
      return vo(e, t, r, i);
    }
    Rt = o.InternalError = ft(Error, "InternalError"), Kr(), be = o.BindingError = ft(Error, "BindingError"), hn(), an(), bn(), Ht = o.UnboundTypeError = ft(Error, "UnboundTypeError"), Mn();
    var go = { q: Ir, v: jr, a: Lr, h: Hr, l: Vr, J: zr, S: Br, n: Nr, _: Gr, d: Wr, ma: Jr, V: Qr, ca: Zr, la: Tn, ka: On, F: En, ba: Rn, R: kn, T: Un, y: In, t: jn, Q: Hn, L: Yn, O: Jn, na: Qn, da: Kn, ha: zt, ia: Zn, ja: eo, K: to, aa: ro, $: io, Y: uo, Z: co, B: Io, P: Go, E: jo, p: ko, b: Co, w: Fo, fa: Lo, c: So, i: Ao, j: Ro, r: Do, z: Uo, x: xo, I: Vo, N: zo, D: Wo, H: qo, W: Jo, U: Qo, k: Po, g: bo, e: _o, f: wo, M: No, m: Mo, o: $o, ga: Oo, u: Eo, ea: Bo, A: Ho, s: To, G: Yo, C: fo, X: yo };
    Fr();
    var ie = o._free = function() {
      return (ie = o._free = o.asm.qa).apply(null, arguments);
    }, _t = o._malloc = function() {
      return (_t = o._malloc = o.asm.ra).apply(null, arguments);
    }, Qt = function() {
      return (Qt = o.asm.ta).apply(null, arguments);
    };
    o.__embind_initialize_bindings = function() {
      return (o.__embind_initialize_bindings = o.asm.ua).apply(null, arguments);
    };
    var D = function() {
      return (D = o.asm.va).apply(null, arguments);
    }, Me = function() {
      return (Me = o.asm.wa).apply(null, arguments);
    }, M = function() {
      return (M = o.asm.xa).apply(null, arguments);
    }, R = function() {
      return (R = o.asm.ya).apply(null, arguments);
    }, Kt = function() {
      return (Kt = o.asm.za).apply(null, arguments);
    }, Zt = function() {
      return (Zt = o.asm.Aa).apply(null, arguments);
    }, Xt = function() {
      return (Xt = o.asm.Ba).apply(null, arguments);
    }, er = function() {
      return (er = o.asm.Ca).apply(null, arguments);
    };
    o.dynCall_viijii = function() {
      return (o.dynCall_viijii = o.asm.Da).apply(null, arguments);
    };
    var tr = o.dynCall_jiii = function() {
      return (tr = o.dynCall_jiii = o.asm.Ea).apply(null, arguments);
    }, rr = o.dynCall_jiiii = function() {
      return (rr = o.dynCall_jiiii = o.asm.Fa).apply(null, arguments);
    };
    o.dynCall_iiiiij = function() {
      return (o.dynCall_iiiiij = o.asm.Ga).apply(null, arguments);
    }, o.dynCall_iiiiijj = function() {
      return (o.dynCall_iiiiijj = o.asm.Ha).apply(null, arguments);
    }, o.dynCall_iiiiiijj = function() {
      return (o.dynCall_iiiiiijj = o.asm.Ia).apply(null, arguments);
    };
    function Co(e, t) {
      var r = M();
      try {
        return U(e)(t);
      } catch (i) {
        if (R(r), i !== i + 0)
          throw i;
        D(1, 0);
      }
    }
    function wo(e, t, r, i) {
      var s = M();
      try {
        U(e)(t, r, i);
      } catch (u) {
        if (R(s), u !== u + 0)
          throw u;
        D(1, 0);
      }
    }
    function _o(e, t, r) {
      var i = M();
      try {
        U(e)(t, r);
      } catch (s) {
        if (R(i), s !== s + 0)
          throw s;
        D(1, 0);
      }
    }
    function bo(e, t) {
      var r = M();
      try {
        U(e)(t);
      } catch (i) {
        if (R(r), i !== i + 0)
          throw i;
        D(1, 0);
      }
    }
    function So(e, t, r) {
      var i = M();
      try {
        return U(e)(t, r);
      } catch (s) {
        if (R(i), s !== s + 0)
          throw s;
        D(1, 0);
      }
    }
    function Po(e) {
      var t = M();
      try {
        U(e)();
      } catch (r) {
        if (R(t), r !== r + 0)
          throw r;
        D(1, 0);
      }
    }
    function $o(e, t, r, i, s, u) {
      var l = M();
      try {
        U(e)(t, r, i, s, u);
      } catch (f) {
        if (R(l), f !== f + 0)
          throw f;
        D(1, 0);
      }
    }
    function To(e, t, r, i, s, u, l, f, h, y, _) {
      var T = M();
      try {
        U(e)(t, r, i, s, u, l, f, h, y, _);
      } catch (O) {
        if (R(T), O !== O + 0)
          throw O;
        D(1, 0);
      }
    }
    function Oo(e, t, r, i, s, u, l) {
      var f = M();
      try {
        U(e)(t, r, i, s, u, l);
      } catch (h) {
        if (R(f), h !== h + 0)
          throw h;
        D(1, 0);
      }
    }
    function Eo(e, t, r, i, s, u, l, f) {
      var h = M();
      try {
        U(e)(t, r, i, s, u, l, f);
      } catch (y) {
        if (R(h), y !== y + 0)
          throw y;
        D(1, 0);
      }
    }
    function Ao(e, t, r, i) {
      var s = M();
      try {
        return U(e)(t, r, i);
      } catch (u) {
        if (R(s), u !== u + 0)
          throw u;
        D(1, 0);
      }
    }
    function Do(e, t, r, i, s, u) {
      var l = M();
      try {
        return U(e)(t, r, i, s, u);
      } catch (f) {
        if (R(l), f !== f + 0)
          throw f;
        D(1, 0);
      }
    }
    function Mo(e, t, r, i, s) {
      var u = M();
      try {
        U(e)(t, r, i, s);
      } catch (l) {
        if (R(u), l !== l + 0)
          throw l;
        D(1, 0);
      }
    }
    function Ro(e, t, r, i, s) {
      var u = M();
      try {
        return U(e)(t, r, i, s);
      } catch (l) {
        if (R(u), l !== l + 0)
          throw l;
        D(1, 0);
      }
    }
    function xo(e, t, r, i, s, u, l) {
      var f = M();
      try {
        return U(e)(t, r, i, s, u, l);
      } catch (h) {
        if (R(f), h !== h + 0)
          throw h;
        D(1, 0);
      }
    }
    function ko(e) {
      var t = M();
      try {
        return U(e)();
      } catch (r) {
        if (R(t), r !== r + 0)
          throw r;
        D(1, 0);
      }
    }
    function Uo(e, t, r, i, s, u, l) {
      var f = M();
      try {
        return U(e)(t, r, i, s, u, l);
      } catch (h) {
        if (R(f), h !== h + 0)
          throw h;
        D(1, 0);
      }
    }
    function Fo(e, t, r, i) {
      var s = M();
      try {
        return U(e)(t, r, i);
      } catch (u) {
        if (R(s), u !== u + 0)
          throw u;
        D(1, 0);
      }
    }
    function Io(e, t, r, i) {
      var s = M();
      try {
        return U(e)(t, r, i);
      } catch (u) {
        if (R(s), u !== u + 0)
          throw u;
        D(1, 0);
      }
    }
    function jo(e, t, r, i, s, u) {
      var l = M();
      try {
        return U(e)(t, r, i, s, u);
      } catch (f) {
        if (R(l), f !== f + 0)
          throw f;
        D(1, 0);
      }
    }
    function Wo(e, t, r, i, s, u, l, f, h, y) {
      var _ = M();
      try {
        return U(e)(t, r, i, s, u, l, f, h, y);
      } catch (T) {
        if (R(_), T !== T + 0)
          throw T;
        D(1, 0);
      }
    }
    function Lo(e, t, r) {
      var i = M();
      try {
        return U(e)(t, r);
      } catch (s) {
        if (R(i), s !== s + 0)
          throw s;
        D(1, 0);
      }
    }
    function Ho(e, t, r, i, s, u, l, f, h, y) {
      var _ = M();
      try {
        U(e)(t, r, i, s, u, l, f, h, y);
      } catch (T) {
        if (R(_), T !== T + 0)
          throw T;
        D(1, 0);
      }
    }
    function Vo(e, t, r, i, s, u, l, f) {
      var h = M();
      try {
        return U(e)(t, r, i, s, u, l, f);
      } catch (y) {
        if (R(h), y !== y + 0)
          throw y;
        D(1, 0);
      }
    }
    function zo(e, t, r, i, s, u, l, f, h) {
      var y = M();
      try {
        return U(e)(t, r, i, s, u, l, f, h);
      } catch (_) {
        if (R(y), _ !== _ + 0)
          throw _;
        D(1, 0);
      }
    }
    function Bo(e, t, r, i, s, u, l, f, h) {
      var y = M();
      try {
        U(e)(t, r, i, s, u, l, f, h);
      } catch (_) {
        if (R(y), _ !== _ + 0)
          throw _;
        D(1, 0);
      }
    }
    function No(e, t, r, i, s, u, l) {
      var f = M();
      try {
        U(e)(t, r, i, s, u, l);
      } catch (h) {
        if (R(f), h !== h + 0)
          throw h;
        D(1, 0);
      }
    }
    function Go(e, t, r, i) {
      var s = M();
      try {
        return U(e)(t, r, i);
      } catch (u) {
        if (R(s), u !== u + 0)
          throw u;
        D(1, 0);
      }
    }
    function qo(e, t, r, i, s, u, l, f, h, y, _, T) {
      var O = M();
      try {
        return U(e)(t, r, i, s, u, l, f, h, y, _, T);
      } catch (x) {
        if (R(O), x !== x + 0)
          throw x;
        D(1, 0);
      }
    }
    function Yo(e, t, r, i, s, u, l, f, h, y, _, T, O, x, j, G) {
      var W = M();
      try {
        U(e)(t, r, i, s, u, l, f, h, y, _, T, O, x, j, G);
      } catch (q) {
        if (R(W), q !== q + 0)
          throw q;
        D(1, 0);
      }
    }
    function Jo(e, t, r, i) {
      var s = M();
      try {
        return tr(e, t, r, i);
      } catch (u) {
        if (R(s), u !== u + 0)
          throw u;
        D(1, 0);
      }
    }
    function Qo(e, t, r, i, s) {
      var u = M();
      try {
        return rr(e, t, r, i, s);
      } catch (l) {
        if (R(u), l !== l + 0)
          throw l;
        D(1, 0);
      }
    }
    var Qe;
    pe = function e() {
      Qe || nr(), Qe || (pe = e);
    };
    function nr() {
      if (te > 0 || (ae(), te > 0))
        return;
      function e() {
        Qe || (Qe = !0, o.calledRun = !0, !F && (Z(), c(o), o.onRuntimeInitialized && o.onRuntimeInitialized(), ot()));
      }
      o.setStatus ? (o.setStatus("Running..."), setTimeout(function() {
        setTimeout(function() {
          o.setStatus("");
        }, 1), e();
      }, 1)) : e();
    }
    if (o.preInit)
      for (typeof o.preInit == "function" && (o.preInit = [o.preInit]); o.preInit.length > 0; )
        o.preInit.pop()();
    return nr(), a.ready;
  };
})();
function bi(n) {
  return mr(vr, n);
}
async function Si(n, {
  tryHarder: a = ce.tryHarder,
  formats: o = ce.formats,
  maxNumberOfSymbols: c = ce.maxNumberOfSymbols
} = ce) {
  return Ci(
    n,
    {
      tryHarder: a,
      formats: o,
      maxNumberOfSymbols: c
    },
    vr
  );
}
const Pi = [
  "aztec",
  "code_128",
  "code_39",
  "code_93",
  "codabar",
  "data_matrix",
  "ean_13",
  "ean_8",
  "itf",
  "pdf417",
  "qr_code",
  "upc_a",
  "upc_e",
  "unknown"
], yr = /* @__PURE__ */ new Map([
  ["aztec", "Aztec"],
  ["code_128", "Code128"],
  ["code_39", "Code39"],
  ["code_93", "Code93"],
  ["codabar", "Codabar"],
  ["data_matrix", "DataMatrix"],
  ["ean_13", "EAN-13"],
  ["ean_8", "EAN-8"],
  ["itf", "ITF"],
  ["pdf417", "PDF417"],
  ["qr_code", "QRCode"],
  ["upc_a", "UPC-A"],
  ["upc_e", "UPC-E"]
]);
function $i(n) {
  for (const [a, o] of yr)
    if (n === o)
      return a;
  return "unknown";
}
var et;
class Ti {
  constructor(a = {}) {
    ni(this, et, void 0), bi(), oi(this, et, (a == null ? void 0 : a.formats) ?? []);
  }
  static async getSupportedFormats() {
    return Pi;
  }
  async detect(a) {
    const o = await vi(a);
    return o.width === 0 || o.height === 0 ? [] : (await Si(o, {
      tryHarder: !0,
      formats: ri(this, et).map(
        (c) => yr.get(c)
      )
    })).map((c) => {
      const {
        topLeft: { x: d, y: p },
        topRight: { x: m, y: w },
        bottomLeft: { x: b, y: v },
        bottomRight: { x: S, y: P }
      } = c.position, C = Math.min(d, m, b, S), E = Math.min(p, w, v, P), A = Math.max(d, m, b, S), F = Math.max(p, w, v, P);
      return {
        boundingBox: new DOMRectReadOnly(C, E, A - C, F - E),
        rawValue: c.text,
        format: $i(c.format),
        cornerPoints: [
          {
            x: d,
            y: p
          },
          {
            x: m,
            y: w
          },
          {
            x: S,
            y: P
          },
          {
            x: b,
            y: v
          }
        ]
      };
    });
  }
}
et = /* @__PURE__ */ new WeakMap();
globalThis.BarcodeDetector ?? (globalThis.BarcodeDetector = Ti);
const gr = (n, a, o = "error") => {
  let c, d;
  const p = new Promise(
    (m, w) => {
      c = m, d = w, n.addEventListener(a, c), n.addEventListener(o, d);
    }
  );
  return p.finally(() => {
    n.removeEventListener(a, c), n.removeEventListener(o, d);
  }), p;
}, Oi = (n) => new Promise((a) => setTimeout(a, n));
class Ei extends Error {
  constructor() {
    super("can't process cross-origin image"), this.name = "DropImageFetchError";
  }
}
class Cr extends Error {
  constructor() {
    super("this browser has no Stream API support"), this.name = "StreamApiNotSupportedError";
  }
}
class Ai extends Error {
  constructor() {
    super(
      "camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."
    ), this.name = "InsecureContextError";
  }
}
const Di = async (n, {
  detectHandler: a,
  locateHandler: o,
  minDelay: c
}) => {
  const d = new BarcodeDetector({ formats: ["qr_code"] }), p = (m) => async (w) => {
    if (n.readyState > 1) {
      const { lastScanned: b, contentBefore: v, lastScanHadContent: S } = m;
      if (w - b < c)
        window.requestAnimationFrame(p(m));
      else {
        const P = await d.detect(n), C = P.some((F) => !v.includes(F.rawValue));
        C && a(P);
        const E = P.length > 0;
        E && o(P), !E && S && o(P);
        const A = {
          lastScanned: w,
          lastScanHadContent: E,
          // It can happen that a QR code is constantly in view of the camera but 
          // maybe a scanned frame is a bit blurry and we detect nothing but in the 
          // next frame we detect the code again. We also want to avoid emitting 
          // a `detect` event in such a case. So we don't reset `contentBefore`, 
          // if we detect nothing, only if we detect something new.
          contentBefore: C ? P.map((F) => F.rawValue) : v
        };
        window.requestAnimationFrame(p(A));
      }
    }
  };
  p({
    lastScanned: performance.now(),
    contentBefore: [],
    lastScanHadContent: !1
  })(performance.now());
}, Mi = async (n) => {
  if (n.startsWith("http") && n.includes(location.host) === !1)
    throw new Ei();
  const a = document.createElement("img");
  return a.src = n, await gr(a, "load"), a;
}, wr = async (n) => await new BarcodeDetector({
  formats: ["qr_code"]
}).detect(n), Ri = async (n) => {
  const a = new BarcodeDetector({
    formats: ["qr_code"]
  }), o = await Mi(n);
  return await a.detect(o);
};
var _r = {}, J = {};
Object.defineProperty(J, "__esModule", {
  value: !0
});
J.compactObject = Pr;
J.deprecated = Hi;
var xi = J.detectBrowser = Vi;
J.disableLog = ji;
J.disableWarnings = Wi;
J.extractVersion = tt;
J.filterStats = zi;
J.log = Li;
J.walkStats = rt;
J.wrapPeerConnectionEvent = Ii;
function ki(n, a, o) {
  return a = Ui(a), a in n ? Object.defineProperty(n, a, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : n[a] = o, n;
}
function Ui(n) {
  var a = Fi(n, "string");
  return fe(a) === "symbol" ? a : String(a);
}
function Fi(n, a) {
  if (fe(n) !== "object" || n === null)
    return n;
  var o = n[Symbol.toPrimitive];
  if (o !== void 0) {
    var c = o.call(n, a || "default");
    if (fe(c) !== "object")
      return c;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (a === "string" ? String : Number)(n);
}
function fe(n) {
  "@babel/helpers - typeof";
  return fe = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(a) {
    return typeof a;
  } : function(a) {
    return a && typeof Symbol == "function" && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a;
  }, fe(n);
}
var br = !0, Sr = !0;
function tt(n, a, o) {
  var c = n.match(a);
  return c && c.length >= o && parseInt(c[o], 10);
}
function Ii(n, a, o) {
  if (n.RTCPeerConnection) {
    var c = n.RTCPeerConnection.prototype, d = c.addEventListener;
    c.addEventListener = function(m, w) {
      if (m !== a)
        return d.apply(this, arguments);
      var b = function(S) {
        var P = o(S);
        P && (w.handleEvent ? w.handleEvent(P) : w(P));
      };
      return this._eventMap = this._eventMap || {}, this._eventMap[a] || (this._eventMap[a] = /* @__PURE__ */ new Map()), this._eventMap[a].set(w, b), d.apply(this, [m, b]);
    };
    var p = c.removeEventListener;
    c.removeEventListener = function(m, w) {
      if (m !== a || !this._eventMap || !this._eventMap[a])
        return p.apply(this, arguments);
      if (!this._eventMap[a].has(w))
        return p.apply(this, arguments);
      var b = this._eventMap[a].get(w);
      return this._eventMap[a].delete(w), this._eventMap[a].size === 0 && delete this._eventMap[a], Object.keys(this._eventMap).length === 0 && delete this._eventMap, p.apply(this, [m, b]);
    }, Object.defineProperty(c, "on" + a, {
      get: function() {
        return this["_on" + a];
      },
      set: function(w) {
        this["_on" + a] && (this.removeEventListener(a, this["_on" + a]), delete this["_on" + a]), w && this.addEventListener(a, this["_on" + a] = w);
      },
      enumerable: !0,
      configurable: !0
    });
  }
}
function ji(n) {
  return typeof n != "boolean" ? new Error("Argument type: " + fe(n) + ". Please use a boolean.") : (br = n, n ? "adapter.js logging disabled" : "adapter.js logging enabled");
}
function Wi(n) {
  return typeof n != "boolean" ? new Error("Argument type: " + fe(n) + ". Please use a boolean.") : (Sr = !n, "adapter.js deprecation warnings " + (n ? "disabled" : "enabled"));
}
function Li() {
  if ((typeof window > "u" ? "undefined" : fe(window)) === "object") {
    if (br)
      return;
    typeof console < "u" && typeof console.log == "function" && console.log.apply(console, arguments);
  }
}
function Hi(n, a) {
  Sr && console.warn(n + " is deprecated, please use " + a + " instead.");
}
function Vi(n) {
  var a = {
    browser: null,
    version: null
  };
  if (typeof n > "u" || !n.navigator)
    return a.browser = "Not a browser.", a;
  var o = n.navigator;
  if (o.mozGetUserMedia)
    a.browser = "firefox", a.version = tt(o.userAgent, /Firefox\/(\d+)\./, 1);
  else if (o.webkitGetUserMedia || n.isSecureContext === !1 && n.webkitRTCPeerConnection)
    a.browser = "chrome", a.version = tt(o.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
  else if (n.RTCPeerConnection && o.userAgent.match(/AppleWebKit\/(\d+)\./))
    a.browser = "safari", a.version = tt(o.userAgent, /AppleWebKit\/(\d+)\./, 1), a.supportsUnifiedPlan = n.RTCRtpTransceiver && "currentDirection" in n.RTCRtpTransceiver.prototype;
  else
    return a.browser = "Not a supported browser.", a;
  return a;
}
function cr(n) {
  return Object.prototype.toString.call(n) === "[object Object]";
}
function Pr(n) {
  return cr(n) ? Object.keys(n).reduce(function(a, o) {
    var c = cr(n[o]), d = c ? Pr(n[o]) : n[o], p = c && !Object.keys(d).length;
    return d === void 0 || p ? a : Object.assign(a, ki({}, o, d));
  }, {}) : n;
}
function rt(n, a, o) {
  !a || o.has(a.id) || (o.set(a.id, a), Object.keys(a).forEach(function(c) {
    c.endsWith("Id") ? rt(n, n.get(a[c]), o) : c.endsWith("Ids") && a[c].forEach(function(d) {
      rt(n, n.get(d), o);
    });
  }));
}
function zi(n, a, o) {
  var c = o ? "outbound-rtp" : "inbound-rtp", d = /* @__PURE__ */ new Map();
  if (a === null)
    return d;
  var p = [];
  return n.forEach(function(m) {
    m.type === "track" && m.trackIdentifier === a.id && p.push(m);
  }), p.forEach(function(m) {
    n.forEach(function(w) {
      w.type === c && w.trackId === m.id && rt(n, w, d);
    });
  }), d;
}
Object.defineProperty(_r, "__esModule", {
  value: !0
});
var Bi = _r.shimGetUserMedia = qi, Ni = Gi(J);
function $r(n) {
  if (typeof WeakMap != "function")
    return null;
  var a = /* @__PURE__ */ new WeakMap(), o = /* @__PURE__ */ new WeakMap();
  return ($r = function(d) {
    return d ? o : a;
  })(n);
}
function Gi(n, a) {
  if (!a && n && n.__esModule)
    return n;
  if (n === null || ue(n) !== "object" && typeof n != "function")
    return { default: n };
  var o = $r(a);
  if (o && o.has(n))
    return o.get(n);
  var c = {}, d = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var p in n)
    if (p !== "default" && Object.prototype.hasOwnProperty.call(n, p)) {
      var m = d ? Object.getOwnPropertyDescriptor(n, p) : null;
      m && (m.get || m.set) ? Object.defineProperty(c, p, m) : c[p] = n[p];
    }
  return c.default = n, o && o.set(n, c), c;
}
function ue(n) {
  "@babel/helpers - typeof";
  return ue = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(a) {
    return typeof a;
  } : function(a) {
    return a && typeof Symbol == "function" && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a;
  }, ue(n);
}
var fr = Ni.log;
function qi(n, a) {
  var o = n && n.navigator;
  if (o.mediaDevices) {
    var c = function(v) {
      if (ue(v) !== "object" || v.mandatory || v.optional)
        return v;
      var S = {};
      return Object.keys(v).forEach(function(P) {
        if (!(P === "require" || P === "advanced" || P === "mediaSource")) {
          var C = ue(v[P]) === "object" ? v[P] : {
            ideal: v[P]
          };
          C.exact !== void 0 && typeof C.exact == "number" && (C.min = C.max = C.exact);
          var E = function(B, I) {
            return B ? B + I.charAt(0).toUpperCase() + I.slice(1) : I === "deviceId" ? "sourceId" : I;
          };
          if (C.ideal !== void 0) {
            S.optional = S.optional || [];
            var A = {};
            typeof C.ideal == "number" ? (A[E("min", P)] = C.ideal, S.optional.push(A), A = {}, A[E("max", P)] = C.ideal, S.optional.push(A)) : (A[E("", P)] = C.ideal, S.optional.push(A));
          }
          C.exact !== void 0 && typeof C.exact != "number" ? (S.mandatory = S.mandatory || {}, S.mandatory[E("", P)] = C.exact) : ["min", "max"].forEach(function(F) {
            C[F] !== void 0 && (S.mandatory = S.mandatory || {}, S.mandatory[E(F, P)] = C[F]);
          });
        }
      }), v.advanced && (S.optional = (S.optional || []).concat(v.advanced)), S;
    }, d = function(v, S) {
      if (a.version >= 61)
        return S(v);
      if (v = JSON.parse(JSON.stringify(v)), v && ue(v.audio) === "object") {
        var P = function(B, I, L) {
          I in B && !(L in B) && (B[L] = B[I], delete B[I]);
        };
        v = JSON.parse(JSON.stringify(v)), P(v.audio, "autoGainControl", "googAutoGainControl"), P(v.audio, "noiseSuppression", "googNoiseSuppression"), v.audio = c(v.audio);
      }
      if (v && ue(v.video) === "object") {
        var C = v.video.facingMode;
        C = C && (ue(C) === "object" ? C : {
          ideal: C
        });
        var E = a.version < 66;
        if (C && (C.exact === "user" || C.exact === "environment" || C.ideal === "user" || C.ideal === "environment") && !(o.mediaDevices.getSupportedConstraints && o.mediaDevices.getSupportedConstraints().facingMode && !E)) {
          delete v.video.facingMode;
          var A;
          if (C.exact === "environment" || C.ideal === "environment" ? A = ["back", "rear"] : (C.exact === "user" || C.ideal === "user") && (A = ["front"]), A)
            return o.mediaDevices.enumerateDevices().then(function(F) {
              F = F.filter(function(I) {
                return I.kind === "videoinput";
              });
              var B = F.find(function(I) {
                return A.some(function(L) {
                  return I.label.toLowerCase().includes(L);
                });
              });
              return !B && F.length && A.includes("back") && (B = F[F.length - 1]), B && (v.video.deviceId = C.exact ? {
                exact: B.deviceId
              } : {
                ideal: B.deviceId
              }), v.video = c(v.video), fr("chrome: " + JSON.stringify(v)), S(v);
            });
        }
        v.video = c(v.video);
      }
      return fr("chrome: " + JSON.stringify(v)), S(v);
    }, p = function(v) {
      return a.version >= 64 ? v : {
        name: {
          PermissionDeniedError: "NotAllowedError",
          PermissionDismissedError: "NotAllowedError",
          InvalidStateError: "NotAllowedError",
          DevicesNotFoundError: "NotFoundError",
          ConstraintNotSatisfiedError: "OverconstrainedError",
          TrackStartError: "NotReadableError",
          MediaDeviceFailedDueToShutdown: "NotAllowedError",
          MediaDeviceKillSwitchOn: "NotAllowedError",
          TabCaptureError: "AbortError",
          ScreenCaptureError: "AbortError",
          DeviceCaptureError: "AbortError"
        }[v.name] || v.name,
        message: v.message,
        constraint: v.constraint || v.constraintName,
        toString: function() {
          return this.name + (this.message && ": ") + this.message;
        }
      };
    }, m = function(v, S, P) {
      d(v, function(C) {
        o.webkitGetUserMedia(C, S, function(E) {
          P && P(p(E));
        });
      });
    };
    if (o.getUserMedia = m.bind(o), o.mediaDevices.getUserMedia) {
      var w = o.mediaDevices.getUserMedia.bind(o.mediaDevices);
      o.mediaDevices.getUserMedia = function(b) {
        return d(b, function(v) {
          return w(v).then(function(S) {
            if (v.audio && !S.getAudioTracks().length || v.video && !S.getVideoTracks().length)
              throw S.getTracks().forEach(function(P) {
                P.stop();
              }), new DOMException("", "NotFoundError");
            return S;
          }, function(S) {
            return Promise.reject(p(S));
          });
        });
      };
    }
  }
}
var Tr = {};
Object.defineProperty(Tr, "__esModule", {
  value: !0
});
var Yi = Tr.shimGetUserMedia = Ki, Ji = Qi(J);
function Or(n) {
  if (typeof WeakMap != "function")
    return null;
  var a = /* @__PURE__ */ new WeakMap(), o = /* @__PURE__ */ new WeakMap();
  return (Or = function(d) {
    return d ? o : a;
  })(n);
}
function Qi(n, a) {
  if (!a && n && n.__esModule)
    return n;
  if (n === null || Se(n) !== "object" && typeof n != "function")
    return { default: n };
  var o = Or(a);
  if (o && o.has(n))
    return o.get(n);
  var c = {}, d = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var p in n)
    if (p !== "default" && Object.prototype.hasOwnProperty.call(n, p)) {
      var m = d ? Object.getOwnPropertyDescriptor(n, p) : null;
      m && (m.get || m.set) ? Object.defineProperty(c, p, m) : c[p] = n[p];
    }
  return c.default = n, o && o.set(n, c), c;
}
function Se(n) {
  "@babel/helpers - typeof";
  return Se = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(a) {
    return typeof a;
  } : function(a) {
    return a && typeof Symbol == "function" && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a;
  }, Se(n);
}
function Ki(n, a) {
  var o = n && n.navigator, c = n && n.MediaStreamTrack;
  if (o.getUserMedia = function(b, v, S) {
    Ji.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), o.mediaDevices.getUserMedia(b).then(v, S);
  }, !(a.version > 55 && "autoGainControl" in o.mediaDevices.getSupportedConstraints())) {
    var d = function(v, S, P) {
      S in v && !(P in v) && (v[P] = v[S], delete v[S]);
    }, p = o.mediaDevices.getUserMedia.bind(o.mediaDevices);
    if (o.mediaDevices.getUserMedia = function(b) {
      return Se(b) === "object" && Se(b.audio) === "object" && (b = JSON.parse(JSON.stringify(b)), d(b.audio, "autoGainControl", "mozAutoGainControl"), d(b.audio, "noiseSuppression", "mozNoiseSuppression")), p(b);
    }, c && c.prototype.getSettings) {
      var m = c.prototype.getSettings;
      c.prototype.getSettings = function() {
        var b = m.apply(this, arguments);
        return d(b, "mozAutoGainControl", "autoGainControl"), d(b, "mozNoiseSuppression", "noiseSuppression"), b;
      };
    }
    if (c && c.prototype.applyConstraints) {
      var w = c.prototype.applyConstraints;
      c.prototype.applyConstraints = function(b) {
        return this.kind === "audio" && Se(b) === "object" && (b = JSON.parse(JSON.stringify(b)), d(b, "autoGainControl", "mozAutoGainControl"), d(b, "noiseSuppression", "mozNoiseSuppression")), w.apply(this, [b]);
      };
    }
  }
}
var X = {};
Object.defineProperty(X, "__esModule", {
  value: !0
});
X.shimAudioContext = sa;
X.shimCallbacksAPI = ra;
X.shimConstraints = Dr;
X.shimCreateOfferLegacy = aa;
var Zi = X.shimGetUserMedia = na;
X.shimLocalStreamsAPI = ea;
X.shimRTCIceServerUrls = oa;
X.shimRemoteStreamsAPI = ta;
X.shimTrackEventTransceiver = ia;
var Er = Xi(J);
function Ar(n) {
  if (typeof WeakMap != "function")
    return null;
  var a = /* @__PURE__ */ new WeakMap(), o = /* @__PURE__ */ new WeakMap();
  return (Ar = function(d) {
    return d ? o : a;
  })(n);
}
function Xi(n, a) {
  if (!a && n && n.__esModule)
    return n;
  if (n === null || le(n) !== "object" && typeof n != "function")
    return { default: n };
  var o = Ar(a);
  if (o && o.has(n))
    return o.get(n);
  var c = {}, d = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var p in n)
    if (p !== "default" && Object.prototype.hasOwnProperty.call(n, p)) {
      var m = d ? Object.getOwnPropertyDescriptor(n, p) : null;
      m && (m.get || m.set) ? Object.defineProperty(c, p, m) : c[p] = n[p];
    }
  return c.default = n, o && o.set(n, c), c;
}
function le(n) {
  "@babel/helpers - typeof";
  return le = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(a) {
    return typeof a;
  } : function(a) {
    return a && typeof Symbol == "function" && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a;
  }, le(n);
}
function ea(n) {
  if (!(le(n) !== "object" || !n.RTCPeerConnection)) {
    if ("getLocalStreams" in n.RTCPeerConnection.prototype || (n.RTCPeerConnection.prototype.getLocalStreams = function() {
      return this._localStreams || (this._localStreams = []), this._localStreams;
    }), !("addStream" in n.RTCPeerConnection.prototype)) {
      var a = n.RTCPeerConnection.prototype.addTrack;
      n.RTCPeerConnection.prototype.addStream = function(c) {
        var d = this;
        this._localStreams || (this._localStreams = []), this._localStreams.includes(c) || this._localStreams.push(c), c.getAudioTracks().forEach(function(p) {
          return a.call(d, p, c);
        }), c.getVideoTracks().forEach(function(p) {
          return a.call(d, p, c);
        });
      }, n.RTCPeerConnection.prototype.addTrack = function(c) {
        for (var d = this, p = arguments.length, m = new Array(p > 1 ? p - 1 : 0), w = 1; w < p; w++)
          m[w - 1] = arguments[w];
        return m && m.forEach(function(b) {
          d._localStreams ? d._localStreams.includes(b) || d._localStreams.push(b) : d._localStreams = [b];
        }), a.apply(this, arguments);
      };
    }
    "removeStream" in n.RTCPeerConnection.prototype || (n.RTCPeerConnection.prototype.removeStream = function(c) {
      var d = this;
      this._localStreams || (this._localStreams = []);
      var p = this._localStreams.indexOf(c);
      if (p !== -1) {
        this._localStreams.splice(p, 1);
        var m = c.getTracks();
        this.getSenders().forEach(function(w) {
          m.includes(w.track) && d.removeTrack(w);
        });
      }
    });
  }
}
function ta(n) {
  if (!(le(n) !== "object" || !n.RTCPeerConnection) && ("getRemoteStreams" in n.RTCPeerConnection.prototype || (n.RTCPeerConnection.prototype.getRemoteStreams = function() {
    return this._remoteStreams ? this._remoteStreams : [];
  }), !("onaddstream" in n.RTCPeerConnection.prototype))) {
    Object.defineProperty(n.RTCPeerConnection.prototype, "onaddstream", {
      get: function() {
        return this._onaddstream;
      },
      set: function(c) {
        var d = this;
        this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = c), this.addEventListener("track", this._onaddstreampoly = function(p) {
          p.streams.forEach(function(m) {
            if (d._remoteStreams || (d._remoteStreams = []), !d._remoteStreams.includes(m)) {
              d._remoteStreams.push(m);
              var w = new Event("addstream");
              w.stream = m, d.dispatchEvent(w);
            }
          });
        });
      }
    });
    var a = n.RTCPeerConnection.prototype.setRemoteDescription;
    n.RTCPeerConnection.prototype.setRemoteDescription = function() {
      var c = this;
      return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(d) {
        d.streams.forEach(function(p) {
          if (c._remoteStreams || (c._remoteStreams = []), !(c._remoteStreams.indexOf(p) >= 0)) {
            c._remoteStreams.push(p);
            var m = new Event("addstream");
            m.stream = p, c.dispatchEvent(m);
          }
        });
      }), a.apply(c, arguments);
    };
  }
}
function ra(n) {
  if (!(le(n) !== "object" || !n.RTCPeerConnection)) {
    var a = n.RTCPeerConnection.prototype, o = a.createOffer, c = a.createAnswer, d = a.setLocalDescription, p = a.setRemoteDescription, m = a.addIceCandidate;
    a.createOffer = function(v, S) {
      var P = arguments.length >= 2 ? arguments[2] : arguments[0], C = o.apply(this, [P]);
      return S ? (C.then(v, S), Promise.resolve()) : C;
    }, a.createAnswer = function(v, S) {
      var P = arguments.length >= 2 ? arguments[2] : arguments[0], C = c.apply(this, [P]);
      return S ? (C.then(v, S), Promise.resolve()) : C;
    };
    var w = function(v, S, P) {
      var C = d.apply(this, [v]);
      return P ? (C.then(S, P), Promise.resolve()) : C;
    };
    a.setLocalDescription = w, w = function(v, S, P) {
      var C = p.apply(this, [v]);
      return P ? (C.then(S, P), Promise.resolve()) : C;
    }, a.setRemoteDescription = w, w = function(v, S, P) {
      var C = m.apply(this, [v]);
      return P ? (C.then(S, P), Promise.resolve()) : C;
    }, a.addIceCandidate = w;
  }
}
function na(n) {
  var a = n && n.navigator;
  if (a.mediaDevices && a.mediaDevices.getUserMedia) {
    var o = a.mediaDevices, c = o.getUserMedia.bind(o);
    a.mediaDevices.getUserMedia = function(d) {
      return c(Dr(d));
    };
  }
  !a.getUserMedia && a.mediaDevices && a.mediaDevices.getUserMedia && (a.getUserMedia = function(p, m, w) {
    a.mediaDevices.getUserMedia(p).then(m, w);
  }.bind(a));
}
function Dr(n) {
  return n && n.video !== void 0 ? Object.assign({}, n, {
    video: Er.compactObject(n.video)
  }) : n;
}
function oa(n) {
  if (n.RTCPeerConnection) {
    var a = n.RTCPeerConnection;
    n.RTCPeerConnection = function(c, d) {
      if (c && c.iceServers) {
        for (var p = [], m = 0; m < c.iceServers.length; m++) {
          var w = c.iceServers[m];
          w.urls === void 0 && w.url ? (Er.deprecated("RTCIceServer.url", "RTCIceServer.urls"), w = JSON.parse(JSON.stringify(w)), w.urls = w.url, delete w.url, p.push(w)) : p.push(c.iceServers[m]);
        }
        c.iceServers = p;
      }
      return new a(c, d);
    }, n.RTCPeerConnection.prototype = a.prototype, "generateCertificate" in a && Object.defineProperty(n.RTCPeerConnection, "generateCertificate", {
      get: function() {
        return a.generateCertificate;
      }
    });
  }
}
function ia(n) {
  le(n) === "object" && n.RTCTrackEvent && "receiver" in n.RTCTrackEvent.prototype && !("transceiver" in n.RTCTrackEvent.prototype) && Object.defineProperty(n.RTCTrackEvent.prototype, "transceiver", {
    get: function() {
      return {
        receiver: this.receiver
      };
    }
  });
}
function aa(n) {
  var a = n.RTCPeerConnection.prototype.createOffer;
  n.RTCPeerConnection.prototype.createOffer = function(c) {
    if (c) {
      typeof c.offerToReceiveAudio < "u" && (c.offerToReceiveAudio = !!c.offerToReceiveAudio);
      var d = this.getTransceivers().find(function(m) {
        return m.receiver.track.kind === "audio";
      });
      c.offerToReceiveAudio === !1 && d ? d.direction === "sendrecv" ? d.setDirection ? d.setDirection("sendonly") : d.direction = "sendonly" : d.direction === "recvonly" && (d.setDirection ? d.setDirection("inactive") : d.direction = "inactive") : c.offerToReceiveAudio === !0 && !d && this.addTransceiver("audio", {
        direction: "recvonly"
      }), typeof c.offerToReceiveVideo < "u" && (c.offerToReceiveVideo = !!c.offerToReceiveVideo);
      var p = this.getTransceivers().find(function(m) {
        return m.receiver.track.kind === "video";
      });
      c.offerToReceiveVideo === !1 && p ? p.direction === "sendrecv" ? p.setDirection ? p.setDirection("sendonly") : p.direction = "sendonly" : p.direction === "recvonly" && (p.setDirection ? p.setDirection("inactive") : p.direction = "inactive") : c.offerToReceiveVideo === !0 && !p && this.addTransceiver("video", {
        direction: "recvonly"
      });
    }
    return a.apply(this, arguments);
  };
}
function sa(n) {
  le(n) !== "object" || n.AudioContext || (n.AudioContext = n.webkitAudioContext);
}
const ua = (n) => {
  let a = !1, o;
  return (...c) => (a || (o = n(c), a = !0), o);
}, ca = ua(() => {
  const n = xi(window);
  switch (n.browser) {
    case "chrome":
      Bi(window, n);
      break;
    case "firefox":
      Yi(window, n);
      break;
    case "safari":
      Zi(window, n);
      break;
    default:
      throw new Cr();
  }
});
let ge = { isActive: !1 };
function bt() {
  if (ge.isActive) {
    ge.videoEl.srcObject = null;
    for (const n of ge.stream.getTracks())
      ge.stream.removeTrack(n), n.stop();
    ge = { isActive: !1 };
  }
}
async function fa(n, { constraints: a, torch: o }) {
  var p, m;
  if (window.isSecureContext !== !0)
    throw new Ai();
  if (((p = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : p.getUserMedia) === void 0)
    throw new Cr();
  ca();
  const c = await navigator.mediaDevices.getUserMedia({
    audio: !1,
    video: a
  });
  if (n.srcObject !== void 0 ? n.srcObject = c : n.mozSrcObject !== void 0 ? n.mozSrcObject = c : window.URL.createObjectURL ? n.src = window.URL.createObjectURL(c) : window.webkitURL ? n.src = window.webkitURL.createObjectURL(c) : n.src = c.id, await gr(n, "loadeddata"), await Oi(500), o) {
    const [w] = c.getVideoTracks();
    w.getCapabilities().torch ? w.applyConstraints({ advanced: [{ torch: !0 }] }) : console.warn("device does not support torch capability");
  }
  ge = { videoEl: n, stream: c, isActive: !0 };
  const [d] = ge.stream.getVideoTracks();
  return ((m = d == null ? void 0 : d.getCapabilities) == null ? void 0 : m.call(d)) ?? {};
}
const la = { class: "qrcode-stream-wrapper" }, da = { class: "qrcode-stream-overlay" }, pa = /* @__PURE__ */ St({
  __name: "QrcodeStream",
  props: {
    constraints: {
      type: Object,
      default() {
        return { facingMode: "environment" };
      }
    },
    paused: {
      type: Boolean,
      default: !1
    },
    torch: {
      type: Boolean,
      default: !1
    },
    track: {
      type: Function
    }
  },
  emits: ["detect", "camera-on", "camera-off", "error"],
  setup(n, { emit: a }) {
    const o = n, c = Re(), d = Re(), p = Re(), m = Re(!1), w = Re(!1);
    Ko(() => {
      w.value = !0;
    }), Zo(() => {
      bt();
    });
    const b = or(() => ({
      torch: o.torch,
      constraints: o.constraints,
      shouldStream: w.value && !o.paused
    }));
    ir(b, async (C) => {
      if (C.shouldStream)
        try {
          const E = await fa(p.value, C);
          w.value ? (m.value = !0, a("camera-on", E)) : bt();
        } catch (E) {
          a("error", E);
        }
      else {
        const E = c.value, A = E.getContext("2d"), F = p.value;
        E.width = F.videoWidth, E.height = F.videoHeight, A == null || A.drawImage(F, 0, 0, F.videoWidth, F.videoHeight), bt(), m.value = !1, a("camera-off");
      }
    }, { deep: !0 });
    const v = or(() => b.value.shouldStream && m.value);
    ir(v, (C) => {
      if (C) {
        P(c.value), P(d.value);
        const E = () => o.track === void 0 ? 500 : 40;
        Di(p.value, {
          detectHandler: (A) => a("detect", A),
          locateHandler: S,
          minDelay: E()
        });
      }
    });
    const S = (C) => {
      const E = d.value, A = p.value;
      if (E !== void 0)
        if (C.length > 0 && o.track !== void 0 && A !== void 0) {
          const F = A.offsetWidth, B = A.offsetHeight, I = A.videoWidth, L = A.videoHeight, ee = Math.max(F / I, B / L), de = I * ee, H = L * ee, V = de / I, ke = H / L, Ue = (F - de) / 2, Fe = (B - H) / 2, Ce = ({ x: ae, y: Z }) => ({
            x: Math.floor(ae * V),
            y: Math.floor(Z * ke)
          }), Pe = ({ x: ae, y: Z }) => ({
            x: Math.floor(ae + Ue),
            y: Math.floor(Z + Fe)
          }), Ie = C.map((ae) => {
            const { boundingBox: Z, cornerPoints: ot } = ae, { x: it, y: at } = Pe(
              Ce({
                x: Z.x,
                y: Z.y
              })
            ), { x: st, y: te } = Ce({
              x: Z.width,
              y: Z.height
            });
            return {
              ...ae,
              cornerPoints: ot.map((pe) => Pe(Ce(pe))),
              boundingBox: DOMRectReadOnly.fromRect({ x: it, y: at, width: st, height: te })
            };
          });
          E.width = A.offsetWidth, E.height = A.offsetHeight;
          const je = E.getContext("2d");
          o.track(Ie, je);
        } else
          P(E);
    }, P = (C) => {
      const E = C.getContext("2d");
      E == null || E.clearRect(0, 0, C.width, C.height);
    };
    return (C, E) => (Pt(), $t("div", la, [
      Ze("video", {
        ref_key: "videoRef",
        ref: p,
        class: Xo([{ "qrcode-stream-camera--hidden": !v.value }, "qrcode-stream-camera"]),
        autoplay: "",
        muted: "",
        playsinline: ""
      }, null, 2),
      ei(Ze("canvas", {
        ref_key: "pauseFrameRef",
        ref: c,
        class: "qrcode-stream-camera"
      }, null, 512), [
        [ti, !v.value]
      ]),
      Ze("canvas", {
        ref_key: "trackingLayerRef",
        ref: d,
        class: "qrcode-stream-overlay"
      }, null, 512),
      Ze("div", da, [
        lr(C.$slots, "default", {}, void 0, !0)
      ])
    ]));
  }
});
const ha = (n, a) => {
  const o = n.__vccOpts || n;
  for (const [c, d] of a)
    o[c] = d;
  return o;
}, ma = /* @__PURE__ */ ha(pa, [["__scopeId", "data-v-c6aebd5b"]]), va = /* @__PURE__ */ St({
  __name: "QrcodeCapture",
  emits: ["detect"],
  setup(n, { emit: a }) {
    const o = async (d) => {
      const p = await await d;
      a("detect", p);
    }, c = (d) => {
      if (!(d.target instanceof HTMLInputElement) || !d.target.files)
        return;
      const p = [...Array.from(d.target.files)];
      for (const m of p.map(wr))
        o(m);
    };
    return (d, p) => (Pt(), $t("input", {
      onChange: c,
      type: "file",
      name: "image",
      accept: "image/*",
      capture: "environment",
      multiple: ""
    }, null, 32));
  }
}), ya = ["onDrop"], ga = /* @__PURE__ */ St({
  __name: "QrcodeDropZone",
  emits: ["detect", "dragover", "error"],
  setup(n, { emit: a }) {
    const o = async (p) => {
      try {
        const m = await p;
        a("detect", m);
      } catch (m) {
        a("error", m);
      }
    }, c = (p) => {
      a("dragover", p);
    }, d = ({ dataTransfer: p }) => {
      if (!p)
        return;
      c(!1);
      const m = [...Array.from(p.files)], w = p.getData("text/uri-list");
      m.forEach((b) => {
        o(wr(b));
      }), w !== "" && o(Ri(w));
    };
    return (p, m) => (Pt(), $t("div", {
      onDrop: Xe(d, ["prevent", "stop"]),
      onDragenter: m[0] || (m[0] = Xe((w) => c(!0), ["prevent", "stop"])),
      onDragleave: m[1] || (m[1] = Xe((w) => c(!1), ["prevent", "stop"])),
      onDragover: m[2] || (m[2] = Xe(() => {
      }, ["prevent", "stop"]))
    }, [
      lr(p.$slots, "default")
    ], 40, ya));
  }
});
function Ca(n) {
  n.component("qrcode-stream", ma), n.component("qrcode-capture", va), n.component("qrcode-drop-zone", ga);
}
const wa = { install: Ca };
let nt = null;
typeof window < "u" ? nt = window.Vue : typeof global < "u" && (nt = global.Vue);
nt && nt.use(wa);
export {
  va as QrcodeCapture,
  ga as QrcodeDropZone,
  ma as QrcodeStream,
  wa as VueQrcodeReader,
  Ca as install
};
